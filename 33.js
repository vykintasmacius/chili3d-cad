"use strict";(self.webpackChunkchili3d=self.webpackChunkchili3d||[]).push([["33"],{6400:function(e,r,t){e.exports=t.p+"994523b3944afa4c.wasm"},584:function(e,r,t){t.r(r),t.d(r,{ShapeFactory:()=>ShapeFactory,initWasm:()=>initWasm});var chili_wasm_Module=async function(e={}){var r,n,a,o,s,i,c,u,l,p,d,h,m,f,g,v,w,_,y,S,b,T=new Promise((e,t)=>{r=e,n=t}),O="./this.program",quit_=(e,r)=>{throw r},E="";function locateFile(r){return e.locateFile?e.locateFile(r,E):E+r}try{E=new URL(".","file:///C:/Users/hexhero/Desktop/chili3d/packages/chili-wasm/lib/chili-wasm.js").href}catch{}a=async e=>{var r=await fetch(e,{credentials:"same-origin"});if(r.ok)return r.arrayBuffer();throw Error(r.status+" : "+r.url)};var C=console.log.bind(console),P=console.error.bind(console),k=!1;function assert(e,r){e||abort(r)}function updateMemoryViews(){var e=i.buffer;u=new Int8Array(e),p=new Int16Array(e),l=new Uint8Array(e),d=new Uint16Array(e),h=new Int32Array(e),m=new Uint32Array(e),f=new Float32Array(e),w=new Float64Array(e),g=new BigInt64Array(e),v=new BigUint64Array(e)}function preRun(){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)addOnPreRun(e.preRun.shift());callRuntimeCallbacks(R)}function initRuntime(){e.noFSInit||G.initialized||G.init(),N.init(),eS.ka(),G.ignorePermissions=!1}function postRun(){if(e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;)addOnPostRun(e.postRun.shift());callRuntimeCallbacks(x)}var F=0,A=null;function getUniqueRunDependency(e){return e}function addRunDependency(r){F++,e.monitorRunDependencies?.(F)}function removeRunDependency(r){if(F--,e.monitorRunDependencies?.(F),0==F&&A){var t=A;A=null,t()}}function abort(r){e.onAbort?.(r),P(r="Aborted("+r+")"),k=!0,r+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(r);throw n(t),t}function findWasmBinary(){return e.locateFile?locateFile("chili-wasm.wasm"):new URL(t(6400),t.b).href}function getBinarySync(e){if(e==_&&s)return new Uint8Array(s);if(o)return o(e);throw"both async and sync fetching of the wasm failed"}async function getWasmBinary(e){if(!s)try{var r=await a(e);return new Uint8Array(r)}catch{}return getBinarySync(e)}async function instantiateArrayBuffer(e,r){try{var t=await getWasmBinary(e);return await WebAssembly.instantiate(t,r)}catch(e){P(`failed to asynchronously prepare wasm: ${e}`),abort(e)}}async function instantiateAsync(e,r,t){if(!e&&"function"==typeof WebAssembly.instantiateStreaming)try{var n=fetch(r,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(n,t)}catch(e){P(`wasm streaming compile failed: ${e}`),P("falling back to ArrayBuffer instantiation")}return instantiateArrayBuffer(r,t)}function getWasmImports(){return{a:ey}}async function createWasm(){function receiveInstance(e,r){return i=(eS=applySignatureConversions(eS=e.exports)).ja,updateMemoryViews(),b=eS.oa,removeRunDependency("wasm-instantiate"),eS}function receiveInstantiationResult(e){return receiveInstance(e.instance)}addRunDependency("wasm-instantiate");var r=getWasmImports();if(e.instantiateWasm)return new Promise((t,n)=>{e.instantiateWasm(r,(e,r)=>{t(receiveInstance(e,r))})});_??=findWasmBinary();try{var t=await instantiateAsync(s,_,r);return receiveInstantiationResult(t)}catch(e){return n(e),Promise.reject(e)}}let ExitStatus=class ExitStatus{name="ExitStatus";constructor(e){this.message=`Program terminated with exit(${e})`,this.status=e}};var callRuntimeCallbacks=r=>{for(;r.length>0;)r.shift()(e)},x=[],addOnPostRun=e=>x.push(e),R=[],addOnPreRun=e=>R.push(e),D=!0;let ExceptionInfo=class ExceptionInfo{constructor(e){this.excPtr=e,this.ptr=e-24}set_type(e){m[this.ptr+4>>>2>>>0]=e}get_type(){return m[this.ptr+4>>>2>>>0]}set_destructor(e){m[this.ptr+8>>>2>>>0]=e}get_destructor(){return m[this.ptr+8>>>2>>>0]}set_caught(e){e=+!!e,u[this.ptr+12>>>0]=e}get_caught(){return 0!=u[this.ptr+12>>>0]}set_rethrown(e){e=+!!e,u[this.ptr+13>>>0]=e}get_rethrown(){return 0!=u[this.ptr+13>>>0]}init(e,r){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(r)}set_adjusted_ptr(e){m[this.ptr+16>>>2>>>0]=e}get_adjusted_ptr(){return m[this.ptr+16>>>2>>>0]}};var $=0,H=0,bigintToI53Checked=e=>e<-0x20000000000000||e>0x20000000000000?NaN:Number(e);function ___cxa_throw(e,r,t){throw r>>>=0,t>>>=0,new ExceptionInfo(e>>>=0).init(r,t),$=e,H++,$}var B={isAbs:e=>"/"===e.charAt(0),splitPath:e=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1),normalizeArray:(e,r)=>{for(var t=0,n=e.length-1;n>=0;n--){var a=e[n];"."===a?e.splice(n,1):".."===a?(e.splice(n,1),t++):t&&(e.splice(n,1),t--)}if(r)for(;t;t--)e.unshift("..");return e},normalize:e=>{var r=B.isAbs(e),t="/"===e.slice(-1);return(e=B.normalizeArray(e.split("/").filter(e=>!!e),!r).join("/"))||r||(e="."),e&&t&&(e+="/"),(r?"/":"")+e},dirname:e=>{var r=B.splitPath(e),t=r[0],n=r[1];return t||n?(n&&(n=n.slice(0,-1)),t+n):"."},basename:e=>e&&e.match(/([^\/]+|\/)\/*$/)[1],join:(...e)=>B.normalize(e.join("/")),join2:(e,r)=>B.normalize(e+"/"+r)},initRandomFill=()=>e=>crypto.getRandomValues(e),randomFill=e=>{(randomFill=initRandomFill())(e)},I={resolve:(...e)=>{for(var r="",t=!1,n=e.length-1;n>=-1&&!t;n--){var a=n>=0?e[n]:G.cwd();if("string"!=typeof a)throw TypeError("Arguments to path.resolve must be strings");if(!a)return"";r=a+"/"+r,t=B.isAbs(a)}return r=B.normalizeArray(r.split("/").filter(e=>!!e),!t).join("/"),(t?"/":"")+r||"."},relative:(e,r)=>{function trim(e){for(var r=0;r<e.length&&""===e[r];r++);for(var t=e.length-1;t>=0&&""===e[t];t--);return r>t?[]:e.slice(r,t-r+1)}e=I.resolve(e).slice(1),r=I.resolve(r).slice(1);for(var t=trim(e.split("/")),n=trim(r.split("/")),a=Math.min(t.length,n.length),o=a,s=0;s<a;s++)if(t[s]!==n[s]){o=s;break}for(var i=[],s=o;s<t.length;s++)i.push("..");return(i=i.concat(n.slice(o))).join("/")}},M="undefined"!=typeof TextDecoder?new TextDecoder:void 0,UTF8ArrayToString=(e,r=0,t=NaN)=>{for(var n=(r>>>=0)+t,a=r;e[a]&&!(a>=n);)++a;if(a-r>16&&e.buffer&&M)return M.decode(e.subarray(r,a));for(var o="";r<a;){var s=e[r++];if(!(128&s)){o+=String.fromCharCode(s);continue}var i=63&e[r++];if((224&s)==192){o+=String.fromCharCode((31&s)<<6|i);continue}var c=63&e[r++];if((s=(240&s)==224?(15&s)<<12|i<<6|c:(7&s)<<18|i<<12|c<<6|63&e[r++])<65536)o+=String.fromCharCode(s);else{var u=s-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}return o},W=[],lengthBytesUTF8=e=>{for(var r=0,t=0;t<e.length;++t){var n=e.charCodeAt(t);n<=127?r++:n<=2047?r+=2:n>=55296&&n<=57343?(r+=4,++t):r+=3}return r},stringToUTF8Array=(e,r,t,n)=>{if(t>>>=0,!(n>0))return 0;for(var a=t,o=t+n-1,s=0;s<e.length;++s){var i=e.charCodeAt(s);if(i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++s)),i<=127){if(t>=o)break;r[t++>>>0]=i}else if(i<=2047){if(t+1>=o)break;r[t++>>>0]=192|i>>6,r[t++>>>0]=128|63&i}else if(i<=65535){if(t+2>=o)break;r[t++>>>0]=224|i>>12,r[t++>>>0]=128|i>>6&63,r[t++>>>0]=128|63&i}else{if(t+3>=o)break;r[t++>>>0]=240|i>>18,r[t++>>>0]=128|i>>12&63,r[t++>>>0]=128|i>>6&63,r[t++>>>0]=128|63&i}}return r[t>>>0]=0,t-a},intArrayFromString=(e,r,t)=>{var n=Array(t>0?t:lengthBytesUTF8(e)+1),a=stringToUTF8Array(e,n,0,n.length);return r&&(n.length=a),n},FS_stdin_getChar=()=>{if(!W.length){var e=null;if("undefined"!=typeof window&&"function"==typeof window.prompt&&null!==(e=window.prompt("Input: "))&&(e+="\n"),!e)return null;W=intArrayFromString(e,!0)}return W.shift()},N={ttys:[],init(){},shutdown(){},register(e,r){N.ttys[e]={input:[],output:[],ops:r},G.registerDevice(e,N.stream_ops)},stream_ops:{open(e){var r=N.ttys[e.node.rdev];if(!r)throw new G.ErrnoError(43);e.tty=r,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,r,t,n,a){if(!e.tty||!e.tty.ops.get_char)throw new G.ErrnoError(60);for(var o,s=0,i=0;i<n;i++){try{o=e.tty.ops.get_char(e.tty)}catch(e){throw new G.ErrnoError(29)}if(void 0===o&&0===s)throw new G.ErrnoError(6);if(null==o)break;s++,r[t+i]=o}return s&&(e.node.atime=Date.now()),s},write(e,r,t,n,a){if(!e.tty||!e.tty.ops.put_char)throw new G.ErrnoError(60);try{for(var o=0;o<n;o++)e.tty.ops.put_char(e.tty,r[t+o])}catch(e){throw new G.ErrnoError(29)}return n&&(e.node.mtime=e.node.ctime=Date.now()),o}},default_tty_ops:{get_char:e=>FS_stdin_getChar(),put_char(e,r){null===r||10===r?(C(UTF8ArrayToString(e.output)),e.output=[]):0!=r&&e.output.push(r)},fsync(e){e.output?.length>0&&(C(UTF8ArrayToString(e.output)),e.output=[])},ioctl_tcgets:e=>({c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}),ioctl_tcsets:(e,r,t)=>0,ioctl_tiocgwinsz:e=>[24,80]},default_tty1_ops:{put_char(e,r){null===r||10===r?(P(UTF8ArrayToString(e.output)),e.output=[]):0!=r&&e.output.push(r)},fsync(e){e.output?.length>0&&(P(UTF8ArrayToString(e.output)),e.output=[])}}},mmapAlloc=e=>{abort()},z={ops_table:null,mount:e=>z.createNode(null,"/",16895,0),createNode(e,r,t,n){if(G.isBlkdev(t)||G.isFIFO(t))throw new G.ErrnoError(63);z.ops_table||={dir:{node:{getattr:z.node_ops.getattr,setattr:z.node_ops.setattr,lookup:z.node_ops.lookup,mknod:z.node_ops.mknod,rename:z.node_ops.rename,unlink:z.node_ops.unlink,rmdir:z.node_ops.rmdir,readdir:z.node_ops.readdir,symlink:z.node_ops.symlink},stream:{llseek:z.stream_ops.llseek}},file:{node:{getattr:z.node_ops.getattr,setattr:z.node_ops.setattr},stream:{llseek:z.stream_ops.llseek,read:z.stream_ops.read,write:z.stream_ops.write,mmap:z.stream_ops.mmap,msync:z.stream_ops.msync}},link:{node:{getattr:z.node_ops.getattr,setattr:z.node_ops.setattr,readlink:z.node_ops.readlink},stream:{}},chrdev:{node:{getattr:z.node_ops.getattr,setattr:z.node_ops.setattr},stream:G.chrdev_stream_ops}};var a=G.createNode(e,r,t,n);return G.isDir(a.mode)?(a.node_ops=z.ops_table.dir.node,a.stream_ops=z.ops_table.dir.stream,a.contents={}):G.isFile(a.mode)?(a.node_ops=z.ops_table.file.node,a.stream_ops=z.ops_table.file.stream,a.usedBytes=0,a.contents=null):G.isLink(a.mode)?(a.node_ops=z.ops_table.link.node,a.stream_ops=z.ops_table.link.stream):G.isChrdev(a.mode)&&(a.node_ops=z.ops_table.chrdev.node,a.stream_ops=z.ops_table.chrdev.stream),a.atime=a.mtime=a.ctime=Date.now(),e&&(e.contents[r]=a,e.atime=e.mtime=e.ctime=a.atime),a},getFileDataAsTypedArray:e=>e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0),expandFileStorage(e,r){var t=e.contents?e.contents.length:0;if(!(t>=r)){r=Math.max(r,t*(t<1048576?2:1.125)>>>0),0!=t&&(r=Math.max(r,256));var n=e.contents;e.contents=new Uint8Array(r),e.usedBytes>0&&e.contents.set(n.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,r){if(e.usedBytes!=r)if(0==r)e.contents=null,e.usedBytes=0;else{var t=e.contents;e.contents=new Uint8Array(r),t&&e.contents.set(t.subarray(0,Math.min(r,e.usedBytes))),e.usedBytes=r}},node_ops:{getattr(e){var r={};return r.dev=G.isChrdev(e.mode)?e.id:1,r.ino=e.id,r.mode=e.mode,r.nlink=1,r.uid=0,r.gid=0,r.rdev=e.rdev,G.isDir(e.mode)?r.size=4096:G.isFile(e.mode)?r.size=e.usedBytes:G.isLink(e.mode)?r.size=e.link.length:r.size=0,r.atime=new Date(e.atime),r.mtime=new Date(e.mtime),r.ctime=new Date(e.ctime),r.blksize=4096,r.blocks=Math.ceil(r.size/r.blksize),r},setattr(e,r){for(let t of["mode","atime","mtime","ctime"])null!=r[t]&&(e[t]=r[t]);void 0!==r.size&&z.resizeFileStorage(e,r.size)},lookup(e,r){throw z.doesNotExistError},mknod:(e,r,t,n)=>z.createNode(e,r,t,n),rename(e,r,t){var n;try{n=G.lookupNode(r,t)}catch(e){}if(n){if(G.isDir(e.mode))for(var a in n.contents)throw new G.ErrnoError(55);G.hashRemoveNode(n)}delete e.parent.contents[e.name],r.contents[t]=e,e.name=t,r.ctime=r.mtime=e.parent.ctime=e.parent.mtime=Date.now()},unlink(e,r){delete e.contents[r],e.ctime=e.mtime=Date.now()},rmdir(e,r){var t=G.lookupNode(e,r);for(var n in t.contents)throw new G.ErrnoError(55);delete e.contents[r],e.ctime=e.mtime=Date.now()},readdir:e=>[".","..",...Object.keys(e.contents)],symlink(e,r,t){var n=z.createNode(e,r,41471,0);return n.link=t,n},readlink(e){if(!G.isLink(e.mode))throw new G.ErrnoError(28);return e.link}},stream_ops:{read(e,r,t,n,a){var o=e.node.contents;if(a>=e.node.usedBytes)return 0;var s=Math.min(e.node.usedBytes-a,n);if(s>8&&o.subarray)r.set(o.subarray(a,a+s),t);else for(var i=0;i<s;i++)r[t+i]=o[a+i];return s},write(e,r,t,n,a,o){if(r.buffer===u.buffer&&(o=!1),!n)return 0;var s=e.node;if(s.mtime=s.ctime=Date.now(),r.subarray&&(!s.contents||s.contents.subarray)){if(o)return s.contents=r.subarray(t,t+n),s.usedBytes=n,n;else if(0===s.usedBytes&&0===a)return s.contents=r.slice(t,t+n),s.usedBytes=n,n;else if(a+n<=s.usedBytes)return s.contents.set(r.subarray(t,t+n),a),n}if(z.expandFileStorage(s,a+n),s.contents.subarray&&r.subarray)s.contents.set(r.subarray(t,t+n),a);else for(var i=0;i<n;i++)s.contents[a+i]=r[t+i];return s.usedBytes=Math.max(s.usedBytes,a+n),n},llseek(e,r,t){var n=r;if(1===t?n+=e.position:2===t&&G.isFile(e.node.mode)&&(n+=e.node.usedBytes),n<0)throw new G.ErrnoError(28);return n},mmap(e,r,t,n,a){if(!G.isFile(e.node.mode))throw new G.ErrnoError(43);var o,s,i=e.node.contents;if(!(2&a)&&i&&i.buffer===u.buffer)s=!1,o=i.byteOffset;else{if(s=!0,!(o=mmapAlloc(r)))throw new G.ErrnoError(48);i&&((t>0||t+r<i.length)&&(i=i.subarray?i.subarray(t,t+r):Array.prototype.slice.call(i,t,t+r)),u.set(i,o>>>0))}return{ptr:o,allocated:s}},msync:(e,r,t,n,a)=>(z.stream_ops.write(e,r,0,n,t,!1),0)}},asyncLoad=async e=>new Uint8Array(await a(e)),FS_createDataFile=(...e)=>G.createDataFile(...e),L=[],FS_handledByPreloadPlugin=(e,r,t,n)=>{"undefined"!=typeof Browser&&Browser.init();var a=!1;return L.forEach(o=>{!a&&o.canHandle(r)&&(o.handle(e,r,t,n),a=!0)}),a},FS_modeStringToFlags=e=>{var r={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[e];if(void 0===r)throw Error(`Unknown file open mode: ${e}`);return r},FS_getMode=(e,r)=>{var t=0;return e&&(t|=365),r&&(t|=146),t},G={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,filesystems:null,syncFSRequests:0,readFiles:{},ErrnoError:class{name="ErrnoError";constructor(e){this.errno=e}},FSStream:class{shared={};get object(){return this.node}set object(e){this.node=e}get isRead(){return(2097155&this.flags)!=1}get isWrite(){return(2097155&this.flags)!=0}get isAppend(){return 1024&this.flags}get flags(){return this.shared.flags}set flags(e){this.shared.flags=e}get position(){return this.shared.position}set position(e){this.shared.position=e}},FSNode:class{node_ops={};stream_ops={};readMode=365;writeMode=146;mounted=null;constructor(e,r,t,n){e||(e=this),this.parent=e,this.mount=e.mount,this.id=G.nextInode++,this.name=r,this.mode=t,this.rdev=n,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&this.readMode)===this.readMode}set read(e){e?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(e){e?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return G.isDir(this.mode)}get isDevice(){return G.isChrdev(this.mode)}},lookupPath(e,r={}){if(!e)throw new G.ErrnoError(44);r.follow_mount??=!0,B.isAbs(e)||(e=G.cwd()+"/"+e);e:for(var t=0;t<40;t++){for(var n=e.split("/").filter(e=>!!e),a=G.root,o="/",s=0;s<n.length;s++){var i=s===n.length-1;if(i&&r.parent)break;if("."!==n[s]){if(".."===n[s]){if(o=B.dirname(o),G.isRoot(a)){e=o+"/"+n.slice(s+1).join("/");continue e}a=a.parent;continue}o=B.join2(o,n[s]);try{a=G.lookupNode(a,n[s])}catch(e){if(e?.errno===44&&i&&r.noent_okay)return{path:o};throw e}if(G.isMountpoint(a)&&(!i||r.follow_mount)&&(a=a.mounted.root),G.isLink(a.mode)&&(!i||r.follow)){if(!a.node_ops.readlink)throw new G.ErrnoError(52);var c=a.node_ops.readlink(a);B.isAbs(c)||(c=B.dirname(o)+"/"+c),e=c+"/"+n.slice(s+1).join("/");continue e}}}return{path:o,node:a}}throw new G.ErrnoError(32)},getPath(e){for(var r;;){if(G.isRoot(e)){var t=e.mount.mountpoint;if(!r)return t;return"/"!==t[t.length-1]?`${t}/${r}`:t+r}r=r?`${e.name}/${r}`:e.name,e=e.parent}},hashName(e,r){for(var t=0,n=0;n<r.length;n++)t=(t<<5)-t+r.charCodeAt(n)|0;return(e+t>>>0)%G.nameTable.length},hashAddNode(e){var r=G.hashName(e.parent.id,e.name);e.name_next=G.nameTable[r],G.nameTable[r]=e},hashRemoveNode(e){var r=G.hashName(e.parent.id,e.name);if(G.nameTable[r]===e)G.nameTable[r]=e.name_next;else for(var t=G.nameTable[r];t;){if(t.name_next===e){t.name_next=e.name_next;break}t=t.name_next}},lookupNode(e,r){var t=G.mayLookup(e);if(t)throw new G.ErrnoError(t);for(var n=G.hashName(e.id,r),a=G.nameTable[n];a;a=a.name_next){var o=a.name;if(a.parent.id===e.id&&o===r)return a}return G.lookup(e,r)},createNode(e,r,t,n){var a=new G.FSNode(e,r,t,n);return G.hashAddNode(a),a},destroyNode(e){G.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>(61440&e)==32768,isDir:e=>(61440&e)==16384,isLink:e=>(61440&e)==40960,isChrdev:e=>(61440&e)==8192,isBlkdev:e=>(61440&e)==24576,isFIFO:e=>(61440&e)==4096,isSocket:e=>(49152&e)==49152,flagsToPermissionString(e){var r=["r","w","rw"][3&e];return 512&e&&(r+="w"),r},nodePermissions:(e,r)=>G.ignorePermissions?0:r.includes("r")&&!(292&e.mode)||r.includes("w")&&!(146&e.mode)||r.includes("x")&&!(73&e.mode)?2:0,mayLookup:e=>G.isDir(e.mode)?G.nodePermissions(e,"x")||2*!e.node_ops.lookup:54,mayCreate(e,r){if(!G.isDir(e.mode))return 54;try{return G.lookupNode(e,r),20}catch(e){}return G.nodePermissions(e,"wx")},mayDelete(e,r,t){try{n=G.lookupNode(e,r)}catch(e){return e.errno}var n,a=G.nodePermissions(e,"wx");if(a)return a;if(t){if(!G.isDir(n.mode))return 54;if(G.isRoot(n)||G.getPath(n)===G.cwd())return 10}else if(G.isDir(n.mode))return 31;return 0},mayOpen:(e,r)=>e?G.isLink(e.mode)?32:G.isDir(e.mode)&&("r"!==G.flagsToPermissionString(r)||576&r)?31:G.nodePermissions(e,G.flagsToPermissionString(r)):44,checkOpExists(e,r){if(!e)throw new G.ErrnoError(r);return e},MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=G.MAX_OPEN_FDS;e++)if(!G.streams[e])return e;throw new G.ErrnoError(33)},getStreamChecked(e){var r=G.getStream(e);if(!r)throw new G.ErrnoError(8);return r},getStream:e=>G.streams[e],createStream:(e,r=-1)=>(e=Object.assign(new G.FSStream,e),-1==r&&(r=G.nextfd()),e.fd=r,G.streams[r]=e,e),closeStream(e){G.streams[e]=null},dupStream(e,r=-1){var t=G.createStream(e,r);return t.stream_ops?.dup?.(t),t},doSetAttr(e,r,t){var n=e?.stream_ops.setattr,a=n?e:r;n??=r.node_ops.setattr,G.checkOpExists(n,63),n(a,t)},chrdev_stream_ops:{open(e){var r=G.getDevice(e.node.rdev);e.stream_ops=r.stream_ops,e.stream_ops.open?.(e)},llseek(){throw new G.ErrnoError(70)}},major:e=>e>>8,minor:e=>255&e,makedev:(e,r)=>e<<8|r,registerDevice(e,r){G.devices[e]={stream_ops:r}},getDevice:e=>G.devices[e],getMounts(e){for(var r=[],t=[e];t.length;){var n=t.pop();r.push(n),t.push(...n.mounts)}return r},syncfs(e,r){"function"==typeof e&&(r=e,e=!1),G.syncFSRequests++,G.syncFSRequests>1&&P(`warning: ${G.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var t=G.getMounts(G.root.mount),n=0;function doCallback(e){return G.syncFSRequests--,r(e)}function done(e){if(e)return done.errored?void 0:(done.errored=!0,doCallback(e));++n>=t.length&&doCallback(null)}t.forEach(r=>{if(!r.type.syncfs)return done(null);r.type.syncfs(r,e,done)})},mount(e,r,t){var n,a="/"===t,o=!t;if(a&&G.root)throw new G.ErrnoError(10);if(!a&&!o){var s=G.lookupPath(t,{follow_mount:!1});if(t=s.path,n=s.node,G.isMountpoint(n))throw new G.ErrnoError(10);if(!G.isDir(n.mode))throw new G.ErrnoError(54)}var i={type:e,opts:r,mountpoint:t,mounts:[]},c=e.mount(i);return c.mount=i,i.root=c,a?G.root=c:n&&(n.mounted=i,n.mount&&n.mount.mounts.push(i)),c},unmount(e){var r=G.lookupPath(e,{follow_mount:!1});if(!G.isMountpoint(r.node))throw new G.ErrnoError(28);var t=r.node,n=t.mounted,a=G.getMounts(n);Object.keys(G.nameTable).forEach(e=>{for(var r=G.nameTable[e];r;){var t=r.name_next;a.includes(r.mount)&&G.destroyNode(r),r=t}}),t.mounted=null;var o=t.mount.mounts.indexOf(n);t.mount.mounts.splice(o,1)},lookup:(e,r)=>e.node_ops.lookup(e,r),mknod(e,r,t){var n=G.lookupPath(e,{parent:!0}).node,a=B.basename(e);if(!a)throw new G.ErrnoError(28);if("."===a||".."===a)throw new G.ErrnoError(20);var o=G.mayCreate(n,a);if(o)throw new G.ErrnoError(o);if(!n.node_ops.mknod)throw new G.ErrnoError(63);return n.node_ops.mknod(n,a,r,t)},statfs:e=>G.statfsNode(G.lookupPath(e,{follow:!0}).node),statfsStream:e=>G.statfsNode(e.node),statfsNode(e){var r={bsize:4096,frsize:4096,blocks:1e6,bfree:5e5,bavail:5e5,files:G.nextInode,ffree:G.nextInode-1,fsid:42,flags:2,namelen:255};return e.node_ops.statfs&&Object.assign(r,e.node_ops.statfs(e.mount.opts.root)),r},create:(e,r=438)=>(r&=4095,r|=32768,G.mknod(e,r,0)),mkdir:(e,r=511)=>(r&=1023,r|=16384,G.mknod(e,r,0)),mkdirTree(e,r){var t=e.split("/"),n="";for(var a of t)if(a){(n||B.isAbs(e))&&(n+="/"),n+=a;try{G.mkdir(n,r)}catch(e){if(20!=e.errno)throw e}}},mkdev:(e,r,t)=>(void 0===t&&(t=r,r=438),r|=8192,G.mknod(e,r,t)),symlink(e,r){if(!I.resolve(e))throw new G.ErrnoError(44);var t=G.lookupPath(r,{parent:!0}).node;if(!t)throw new G.ErrnoError(44);var n=B.basename(r),a=G.mayCreate(t,n);if(a)throw new G.ErrnoError(a);if(!t.node_ops.symlink)throw new G.ErrnoError(63);return t.node_ops.symlink(t,n,e)},rename(e,r){var t,n,a,o,s=B.dirname(e),i=B.dirname(r),c=B.basename(e),u=B.basename(r);if(n=G.lookupPath(e,{parent:!0}).node,a=G.lookupPath(r,{parent:!0}).node,!n||!a)throw new G.ErrnoError(44);if(n.mount!==a.mount)throw new G.ErrnoError(75);var l=G.lookupNode(n,c),p=I.relative(e,i);if("."!==p.charAt(0))throw new G.ErrnoError(28);if("."!==(p=I.relative(r,s)).charAt(0))throw new G.ErrnoError(55);try{o=G.lookupNode(a,u)}catch(e){}if(l!==o){var d=G.isDir(l.mode),h=G.mayDelete(n,c,d);if(h||(h=o?G.mayDelete(a,u,d):G.mayCreate(a,u)))throw new G.ErrnoError(h);if(!n.node_ops.rename)throw new G.ErrnoError(63);if(G.isMountpoint(l)||o&&G.isMountpoint(o))throw new G.ErrnoError(10);if(a!==n&&(h=G.nodePermissions(n,"w")))throw new G.ErrnoError(h);G.hashRemoveNode(l);try{n.node_ops.rename(l,a,u),l.parent=a}catch(e){throw e}finally{G.hashAddNode(l)}}},rmdir(e){var r=G.lookupPath(e,{parent:!0}).node,t=B.basename(e),n=G.lookupNode(r,t),a=G.mayDelete(r,t,!0);if(a)throw new G.ErrnoError(a);if(!r.node_ops.rmdir)throw new G.ErrnoError(63);if(G.isMountpoint(n))throw new G.ErrnoError(10);r.node_ops.rmdir(r,t),G.destroyNode(n)},readdir(e){var r=G.lookupPath(e,{follow:!0}).node;return G.checkOpExists(r.node_ops.readdir,54)(r)},unlink(e){var r=G.lookupPath(e,{parent:!0}).node;if(!r)throw new G.ErrnoError(44);var t=B.basename(e),n=G.lookupNode(r,t),a=G.mayDelete(r,t,!1);if(a)throw new G.ErrnoError(a);if(!r.node_ops.unlink)throw new G.ErrnoError(63);if(G.isMountpoint(n))throw new G.ErrnoError(10);r.node_ops.unlink(r,t),G.destroyNode(n)},readlink(e){var r=G.lookupPath(e).node;if(!r)throw new G.ErrnoError(44);if(!r.node_ops.readlink)throw new G.ErrnoError(28);return r.node_ops.readlink(r)},stat(e,r){var t=G.lookupPath(e,{follow:!r}).node;return G.checkOpExists(t.node_ops.getattr,63)(t)},fstat(e){var r=G.getStreamChecked(e),t=r.node,n=r.stream_ops.getattr,a=n?r:t;return n??=t.node_ops.getattr,G.checkOpExists(n,63),n(a)},lstat:e=>G.stat(e,!0),doChmod(e,r,t,n){G.doSetAttr(e,r,{mode:4095&t|-4096&r.mode,ctime:Date.now(),dontFollow:n})},chmod(e,r,t){var n;n="string"==typeof e?G.lookupPath(e,{follow:!t}).node:e,G.doChmod(null,n,r,t)},lchmod(e,r){G.chmod(e,r,!0)},fchmod(e,r){var t=G.getStreamChecked(e);G.doChmod(t,t.node,r,!1)},doChown(e,r,t){G.doSetAttr(e,r,{timestamp:Date.now(),dontFollow:t})},chown(e,r,t,n){var a;a="string"==typeof e?G.lookupPath(e,{follow:!n}).node:e,G.doChown(null,a,n)},lchown(e,r,t){G.chown(e,r,t,!0)},fchown(e,r,t){var n=G.getStreamChecked(e);G.doChown(n,n.node,!1)},doTruncate(e,r,t){if(G.isDir(r.mode))throw new G.ErrnoError(31);if(!G.isFile(r.mode))throw new G.ErrnoError(28);var n=G.nodePermissions(r,"w");if(n)throw new G.ErrnoError(n);G.doSetAttr(e,r,{size:t,timestamp:Date.now()})},truncate(e,r){if(r<0)throw new G.ErrnoError(28);if("string"==typeof e){var t;t=G.lookupPath(e,{follow:!0}).node}else t=e;G.doTruncate(null,t,r)},ftruncate(e,r){var t=G.getStreamChecked(e);if(r<0||(2097155&t.flags)==0)throw new G.ErrnoError(28);G.doTruncate(t,t.node,r)},utime(e,r,t){var n=G.lookupPath(e,{follow:!0}).node;G.checkOpExists(n.node_ops.setattr,63)(n,{atime:r,mtime:t})},open(r,t,n=438){if(""===r)throw new G.ErrnoError(44);if(n=64&(t="string"==typeof t?FS_modeStringToFlags(t):t)?4095&n|32768:0,"object"==typeof r)a=r;else{var a,o=r.endsWith("/"),s=G.lookupPath(r,{follow:!(131072&t),noent_okay:!0});a=s.node,r=s.path}var i=!1;if(64&t)if(a){if(128&t)throw new G.ErrnoError(20)}else if(o)throw new G.ErrnoError(31);else a=G.mknod(r,511|n,0),i=!0;if(!a)throw new G.ErrnoError(44);if(G.isChrdev(a.mode)&&(t&=-513),65536&t&&!G.isDir(a.mode))throw new G.ErrnoError(54);if(!i){var c=G.mayOpen(a,t);if(c)throw new G.ErrnoError(c)}512&t&&!i&&G.truncate(a,0),t&=-131713;var u=G.createStream({node:a,path:G.getPath(a),flags:t,seekable:!0,position:0,stream_ops:a.stream_ops,ungotten:[],error:!1});return u.stream_ops.open&&u.stream_ops.open(u),i&&G.chmod(a,511&n),!e.logReadFiles||1&t||r in G.readFiles||(G.readFiles[r]=1),u},close(e){if(G.isClosed(e))throw new G.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{G.closeStream(e.fd)}e.fd=null},isClosed:e=>null===e.fd,llseek(e,r,t){if(G.isClosed(e))throw new G.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new G.ErrnoError(70);if(0!=t&&1!=t&&2!=t)throw new G.ErrnoError(28);return e.position=e.stream_ops.llseek(e,r,t),e.ungotten=[],e.position},read(e,r,t,n,a){if(n<0||a<0)throw new G.ErrnoError(28);if(G.isClosed(e)||(2097155&e.flags)==1)throw new G.ErrnoError(8);if(G.isDir(e.node.mode))throw new G.ErrnoError(31);if(!e.stream_ops.read)throw new G.ErrnoError(28);var o=void 0!==a;if(o){if(!e.seekable)throw new G.ErrnoError(70)}else a=e.position;var s=e.stream_ops.read(e,r,t,n,a);return o||(e.position+=s),s},write(e,r,t,n,a,o){if(n<0||a<0)throw new G.ErrnoError(28);if(G.isClosed(e)||(2097155&e.flags)==0)throw new G.ErrnoError(8);if(G.isDir(e.node.mode))throw new G.ErrnoError(31);if(!e.stream_ops.write)throw new G.ErrnoError(28);e.seekable&&1024&e.flags&&G.llseek(e,0,2);var s=void 0!==a;if(s){if(!e.seekable)throw new G.ErrnoError(70)}else a=e.position;var i=e.stream_ops.write(e,r,t,n,a,o);return s||(e.position+=i),i},mmap(e,r,t,n,a){if((2&n)!=0&&(2&a)==0&&(2097155&e.flags)!=2||(2097155&e.flags)==1)throw new G.ErrnoError(2);if(!e.stream_ops.mmap)throw new G.ErrnoError(43);if(!r)throw new G.ErrnoError(28);return e.stream_ops.mmap(e,r,t,n,a)},msync:(e,r,t,n,a)=>e.stream_ops.msync?e.stream_ops.msync(e,r,t,n,a):0,ioctl(e,r,t){if(!e.stream_ops.ioctl)throw new G.ErrnoError(59);return e.stream_ops.ioctl(e,r,t)},readFile(e,r={}){if(r.flags=r.flags||0,r.encoding=r.encoding||"binary","utf8"!==r.encoding&&"binary"!==r.encoding)throw Error(`Invalid encoding type "${r.encoding}"`);var t,n=G.open(e,r.flags),a=G.stat(e).size,o=new Uint8Array(a);return G.read(n,o,0,a,0),"utf8"===r.encoding?t=UTF8ArrayToString(o):"binary"===r.encoding&&(t=o),G.close(n),t},writeFile(e,r,t={}){t.flags=t.flags||577;var n=G.open(e,t.flags,t.mode);if("string"==typeof r){var a=new Uint8Array(lengthBytesUTF8(r)+1),o=stringToUTF8Array(r,a,0,a.length);G.write(n,a,0,o,void 0,t.canOwn)}else if(ArrayBuffer.isView(r))G.write(n,r,0,r.byteLength,void 0,t.canOwn);else throw Error("Unsupported data type");G.close(n)},cwd:()=>G.currentPath,chdir(e){var r=G.lookupPath(e,{follow:!0});if(null===r.node)throw new G.ErrnoError(44);if(!G.isDir(r.node.mode))throw new G.ErrnoError(54);var t=G.nodePermissions(r.node,"x");if(t)throw new G.ErrnoError(t);G.currentPath=r.path},createDefaultDirectories(){G.mkdir("/tmp"),G.mkdir("/home"),G.mkdir("/home/web_user")},createDefaultDevices(){G.mkdir("/dev"),G.registerDevice(G.makedev(1,3),{read:()=>0,write:(e,r,t,n,a)=>n,llseek:()=>0}),G.mkdev("/dev/null",G.makedev(1,3)),N.register(G.makedev(5,0),N.default_tty_ops),N.register(G.makedev(6,0),N.default_tty1_ops),G.mkdev("/dev/tty",G.makedev(5,0)),G.mkdev("/dev/tty1",G.makedev(6,0));var e=new Uint8Array(1024),r=0,randomByte=()=>(0===r&&(randomFill(e),r=e.byteLength),e[--r]);G.createDevice("/dev","random",randomByte),G.createDevice("/dev","urandom",randomByte),G.mkdir("/dev/shm"),G.mkdir("/dev/shm/tmp")},createSpecialDirectories(){G.mkdir("/proc");var e=G.mkdir("/proc/self");G.mkdir("/proc/self/fd"),G.mount({mount(){var r=G.createNode(e,"fd",16895,73);return r.stream_ops={llseek:z.stream_ops.llseek},r.node_ops={lookup(e,r){var t=+r,n=G.getStreamChecked(t),a={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>n.path},id:t+1};return a.parent=a,a},readdir:()=>Array.from(G.streams.entries()).filter(([e,r])=>r).map(([e,r])=>e.toString())},r}},{},"/proc/self/fd")},createStandardStreams(e,r,t){e?G.createDevice("/dev","stdin",e):G.symlink("/dev/tty","/dev/stdin"),r?G.createDevice("/dev","stdout",null,r):G.symlink("/dev/tty","/dev/stdout"),t?G.createDevice("/dev","stderr",null,t):G.symlink("/dev/tty1","/dev/stderr"),G.open("/dev/stdin",0),G.open("/dev/stdout",1),G.open("/dev/stderr",1)},staticInit(){G.nameTable=Array(4096),G.mount(z,{},"/"),G.createDefaultDirectories(),G.createDefaultDevices(),G.createSpecialDirectories(),G.filesystems={MEMFS:z}},init(r,t,n){G.initialized=!0,r??=e.stdin,t??=e.stdout,n??=e.stderr,G.createStandardStreams(r,t,n)},quit(){for(var e of(G.initialized=!1,G.streams))e&&G.close(e)},findObject(e,r){var t=G.analyzePath(e,r);return t.exists?t.object:null},analyzePath(e,r){try{var t=G.lookupPath(e,{follow:!r});e=t.path}catch(e){}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var t=G.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=t.path,n.parentObject=t.node,n.name=B.basename(e),t=G.lookupPath(e,{follow:!r}),n.exists=!0,n.path=t.path,n.object=t.node,n.name=t.node.name,n.isRoot="/"===t.path}catch(e){n.error=e.errno}return n},createPath(e,r,t,n){e="string"==typeof e?e:G.getPath(e);for(var a=r.split("/").reverse();a.length;){var o=a.pop();if(o){var s=B.join2(e,o);try{G.mkdir(s)}catch(e){if(20!=e.errno)throw e}e=s}}return s},createFile(e,r,t,n,a){var o=B.join2("string"==typeof e?e:G.getPath(e),r),s=FS_getMode(n,a);return G.create(o,s)},createDataFile(e,r,t,n,a,o){var s=r;e&&(e="string"==typeof e?e:G.getPath(e),s=r?B.join2(e,r):e);var i=FS_getMode(n,a),c=G.create(s,i);if(t){if("string"==typeof t){for(var u=Array(t.length),l=0,p=t.length;l<p;++l)u[l]=t.charCodeAt(l);t=u}G.chmod(c,146|i);var d=G.open(c,577);G.write(d,t,0,t.length,0,o),G.close(d),G.chmod(c,i)}},createDevice(e,r,t,n){var a=B.join2("string"==typeof e?e:G.getPath(e),r),o=FS_getMode(!!t,!!n);G.createDevice.major??=64;var s=G.makedev(G.createDevice.major++,0);return G.registerDevice(s,{open(e){e.seekable=!1},close(e){n?.buffer?.length&&n(10)},read(e,r,n,a,o){for(var s,i=0,c=0;c<a;c++){try{s=t()}catch(e){throw new G.ErrnoError(29)}if(void 0===s&&0===i)throw new G.ErrnoError(6);if(null==s)break;i++,r[n+c]=s}return i&&(e.node.atime=Date.now()),i},write(e,r,t,a,o){for(var s=0;s<a;s++)try{n(r[t+s])}catch(e){throw new G.ErrnoError(29)}return a&&(e.node.mtime=e.node.ctime=Date.now()),s}}),G.mkdev(a,o,s)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{e.contents=o(e.url),e.usedBytes=e.contents.length}catch(e){throw new G.ErrnoError(29)}},createLazyFile(e,r,t,n,a){if("undefined"!=typeof XMLHttpRequest){var o;throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc"}var o={isDevice:!1,url:t},s=G.createFile(e,r,o,n,a);o.contents?s.contents=o.contents:o.url&&(s.contents=null,s.url=o.url),Object.defineProperties(s,{usedBytes:{get:function(){return this.contents.length}}});var i={};function writeChunks(e,r,t,n,a){var o=e.node.contents;if(a>=o.length)return 0;var s=Math.min(o.length-a,n);if(o.slice)for(var i=0;i<s;i++)r[t+i]=o[a+i];else for(var i=0;i<s;i++)r[t+i]=o.get(a+i);return s}return Object.keys(s.stream_ops).forEach(e=>{var r=s.stream_ops[e];i[e]=(...e)=>(G.forceLoadFile(s),r(...e))}),i.read=(e,r,t,n,a)=>(G.forceLoadFile(s),writeChunks(e,r,t,n,a)),i.mmap=(e,r,t,n,a)=>{G.forceLoadFile(s);var o=mmapAlloc(r);if(!o)throw new G.ErrnoError(48);return writeChunks(e,u,o,r,t),{ptr:o,allocated:!0}},s.stream_ops=i,s}},UTF8ToString=(e,r)=>(e>>>=0)?UTF8ArrayToString(l,e,r):"",V={DEFAULT_POLLMASK:5,calculateAt(e,r,t){if(B.isAbs(r))return r;if(-100===e)n=G.cwd();else{var n;n=V.getStreamFromFD(e).path}if(0==r.length){if(!t)throw new G.ErrnoError(44);return n}return n+"/"+r},writeStat(e,r){h[e>>>2>>>0]=r.dev,h[e+4>>>2>>>0]=r.mode,m[e+8>>>2>>>0]=r.nlink,h[e+12>>>2>>>0]=r.uid,h[e+16>>>2>>>0]=r.gid,h[e+20>>>2>>>0]=r.rdev,g[e+24>>>3]=BigInt(r.size),h[e+32>>>2>>>0]=4096,h[e+36>>>2>>>0]=r.blocks;var t=r.atime.getTime(),n=r.mtime.getTime(),a=r.ctime.getTime();return g[e+40>>>3]=BigInt(Math.floor(t/1e3)),m[e+48>>>2>>>0]=t%1e3*1e6,g[e+56>>>3]=BigInt(Math.floor(n/1e3)),m[e+64>>>2>>>0]=n%1e3*1e6,g[e+72>>>3]=BigInt(Math.floor(a/1e3)),m[e+80>>>2>>>0]=a%1e3*1e6,g[e+88>>>3]=BigInt(r.ino),0},writeStatFs(e,r){h[e+4>>>2>>>0]=r.bsize,h[e+40>>>2>>>0]=r.bsize,h[e+8>>>2>>>0]=r.blocks,h[e+12>>>2>>>0]=r.bfree,h[e+16>>>2>>>0]=r.bavail,h[e+20>>>2>>>0]=r.files,h[e+24>>>2>>>0]=r.ffree,h[e+28>>>2>>>0]=r.fsid,h[e+44>>>2>>>0]=r.flags,h[e+36>>>2>>>0]=r.namelen},doMsync(e,r,t,n,a){if(!G.isFile(r.node.mode))throw new G.ErrnoError(43);if(2&n)return 0;var o=l.slice(e,e+t);G.msync(r,o,a,t,n)},getStreamFromFD:e=>G.getStreamChecked(e),varargs:void 0,getStr:e=>UTF8ToString(e)};function ___syscall_chmod(e,r){e>>>=0;try{return e=V.getStr(e),G.chmod(e,r),0}catch(e){if(void 0===G||"ErrnoError"!==e.name)throw e;return-e.errno}}function ___syscall_faccessat(e,r,t,n){r>>>=0;try{if(r=V.getStr(r),r=V.calculateAt(e,r),-8&t)return -28;var a=G.lookupPath(r,{follow:!0}).node;if(!a)return -44;var o="";if(4&t&&(o+="r"),2&t&&(o+="w"),1&t&&(o+="x"),o&&G.nodePermissions(a,o))return -2;return 0}catch(e){if(void 0===G||"ErrnoError"!==e.name)throw e;return-e.errno}}var syscallGetVarargI=()=>{var e=h[+V.varargs>>>2>>>0];return V.varargs+=4,e};function ___syscall_fcntl64(e,r,t){V.varargs=t>>>=0;try{var n=V.getStreamFromFD(e);switch(r){case 0:var a=syscallGetVarargI();if(a<0)break;for(;G.streams[a];)a++;return G.dupStream(n,a).fd;case 1:case 2:case 13:case 14:return 0;case 3:return n.flags;case 4:var a=syscallGetVarargI();return n.flags|=a,0;case 12:var a=syscallGetVarargI();return p[a+0>>>1>>>0]=2,0}return -28}catch(e){if(void 0===G||"ErrnoError"!==e.name)throw e;return-e.errno}}function ___syscall_fstat64(e,r){r>>>=0;try{return V.writeStat(r,G.fstat(e))}catch(e){if(void 0===G||"ErrnoError"!==e.name)throw e;return-e.errno}}function ___syscall_ioctl(e,r,t){V.varargs=t>>>=0;try{var n=V.getStreamFromFD(e);switch(r){case 21509:case 21510:case 21511:case 21512:case 21524:case 21515:if(!n.tty)return -59;return 0;case 21505:if(!n.tty)return -59;if(n.tty.ops.ioctl_tcgets){var a=n.tty.ops.ioctl_tcgets(n),o=syscallGetVarargI();h[o>>>2>>>0]=a.c_iflag||0,h[o+4>>>2>>>0]=a.c_oflag||0,h[o+8>>>2>>>0]=a.c_cflag||0,h[o+12>>>2>>>0]=a.c_lflag||0;for(var s=0;s<32;s++)u[o+s+17>>>0]=a.c_cc[s]||0}return 0;case 21506:case 21507:case 21508:if(!n.tty)return -59;if(n.tty.ops.ioctl_tcsets){for(var o=syscallGetVarargI(),i=h[o>>>2>>>0],c=h[o+4>>>2>>>0],l=h[o+8>>>2>>>0],d=h[o+12>>>2>>>0],m=[],s=0;s<32;s++)m.push(u[o+s+17>>>0]);return n.tty.ops.ioctl_tcsets(n.tty,r,{c_iflag:i,c_oflag:c,c_cflag:l,c_lflag:d,c_cc:m})}return 0;case 21519:if(!n.tty)return -59;var o=syscallGetVarargI();return h[o>>>2>>>0]=0,0;case 21520:if(!n.tty)return -59;return -28;case 21531:var o=syscallGetVarargI();return G.ioctl(n,r,o);case 21523:if(!n.tty)return -59;if(n.tty.ops.ioctl_tiocgwinsz){var f=n.tty.ops.ioctl_tiocgwinsz(n.tty),o=syscallGetVarargI();p[o>>>1>>>0]=f[0],p[o+2>>>1>>>0]=f[1]}return 0;default:return -28}}catch(e){if(void 0===G||"ErrnoError"!==e.name)throw e;return-e.errno}}function ___syscall_lstat64(e,r){e>>>=0,r>>>=0;try{return e=V.getStr(e),V.writeStat(r,G.lstat(e))}catch(e){if(void 0===G||"ErrnoError"!==e.name)throw e;return-e.errno}}function ___syscall_newfstatat(e,r,t,n){r>>>=0,t>>>=0;try{r=V.getStr(r);var a=256&n,o=4096&n;return n&=-6401,r=V.calculateAt(e,r,o),V.writeStat(t,a?G.lstat(r):G.stat(r))}catch(e){if(void 0===G||"ErrnoError"!==e.name)throw e;return-e.errno}}function ___syscall_openat(e,r,t,n){r>>>=0,V.varargs=n>>>=0;try{r=V.getStr(r),r=V.calculateAt(e,r);var a=n?syscallGetVarargI():0;return G.open(r,t,a).fd}catch(e){if(void 0===G||"ErrnoError"!==e.name)throw e;return-e.errno}}function ___syscall_rmdir(e){e>>>=0;try{return e=V.getStr(e),G.rmdir(e),0}catch(e){if(void 0===G||"ErrnoError"!==e.name)throw e;return-e.errno}}function ___syscall_stat64(e,r){e>>>=0,r>>>=0;try{return e=V.getStr(e),V.writeStat(r,G.stat(e))}catch(e){if(void 0===G||"ErrnoError"!==e.name)throw e;return-e.errno}}function ___syscall_unlinkat(e,r,t){r>>>=0;try{return r=V.getStr(r),r=V.calculateAt(e,r),0===t?G.unlink(r):512===t?G.rmdir(r):abort("Invalid flags passed to unlinkat"),0}catch(e){if(void 0===G||"ErrnoError"!==e.name)throw e;return-e.errno}}var U={},runDestructors=e=>{for(;e.length;){var r=e.pop();e.pop()(r)}};function readPointer(e){return this.fromWireType(m[e>>>2>>>0])}var j={},Y={},X={},Z=e.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError"}},throwInternalError=e=>{throw new Z(e)},whenDependentTypesAreResolved=(e,r,t)=>{function onComplete(r){var n=t(r);n.length!==e.length&&throwInternalError("Mismatched type converter count");for(var a=0;a<e.length;++a)registerType(e[a],n[a])}e.forEach(e=>X[e]=r);var n=Array(r.length),a=[],o=0;r.forEach((e,r)=>{Y.hasOwnProperty(e)?n[r]=Y[e]:(a.push(e),j.hasOwnProperty(e)||(j[e]=[]),j[e].push(()=>{n[r]=Y[e],++o===a.length&&onComplete(n)}))}),0===a.length&&onComplete(n)},embindRepr=e=>{if(null===e)return"null";var r=typeof e;return"object"===r||"array"===r||"function"===r?e.toString():""+e},readLatin1String=e=>{for(var r="",t=e;l[t>>>0];)r+=y[l[t++>>>0]];return r},q=e.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError"}},throwBindingError=e=>{throw new q(e)};function sharedRegisterType(e,r,t={}){var n=r.name;if(e||throwBindingError(`type "${n}" must have a positive integer typeid pointer`),Y.hasOwnProperty(e))if(t.ignoreDuplicateRegistrations)return;else throwBindingError(`Cannot register type '${n}' twice`);if(Y[e]=r,delete X[e],j.hasOwnProperty(e)){var a=j[e];delete j[e],a.forEach(e=>e())}}function registerType(e,r,t={}){return sharedRegisterType(e,r,t)}var integerReadValueFromPointer=(e,r,t)=>{switch(r){case 1:return t?e=>u[e>>>0]:e=>l[e>>>0];case 2:return t?e=>p[e>>>1>>>0]:e=>d[e>>>1>>>0];case 4:return t?e=>h[e>>>2>>>0]:e=>m[e>>>2>>>0];case 8:return t?e=>g[e>>>3]:e=>v[e>>>3];default:throw TypeError(`invalid integer width (${r}): ${e}`)}};function __embind_register_bigint(e,r,t,n,a){e>>>=0,r>>>=0,t>>>=0;var o=-1!=(r=readLatin1String(r)).indexOf("u");registerType(e,{name:r,fromWireType:e=>e,toWireType:function(e,r){if("bigint"!=typeof r&&"number"!=typeof r)throw TypeError(`Cannot convert "${embindRepr(r)}" to ${this.name}`);return"number"==typeof r&&(r=BigInt(r)),r},argPackAdvance:J,readValueFromPointer:integerReadValueFromPointer(r,t,!o),destructorFunction:null})}var J=8;function __embind_register_bool(e,r,t,n){r>>>=0,registerType(e>>>=0,{name:r=readLatin1String(r),fromWireType:function(e){return!!e},toWireType:function(e,r){return r?t:n},argPackAdvance:J,readValueFromPointer:function(e){return this.fromWireType(l[e>>>0])},destructorFunction:null})}var shallowCopyInternalPointer=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),throwInstanceAlreadyDeleted=e=>{throwBindingError(e.$$.ptrType.registeredClass.name+" instance already deleted")},K=!1,detachFinalizer=e=>{},runDestructor=e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)},releaseClassHandle=e=>{e.count.value-=1,0===e.count.value&&runDestructor(e)},attachFinalizer=e=>"undefined"==typeof FinalizationRegistry?(attachFinalizer=e=>e,e):(K=new FinalizationRegistry(e=>{releaseClassHandle(e.$$)}),attachFinalizer=e=>{var r=e.$$;return r.smartPtr&&K.register(e,{$$:r},e),e},detachFinalizer=e=>K.unregister(e),attachFinalizer(e)),Q=[],flushPendingDeletes=()=>{for(;Q.length;){var e=Q.pop();e.$$.deleteScheduled=!1,e.delete()}};function ClassHandle(){}var createNamedFunction=(e,r)=>Object.defineProperty(r,"name",{value:e}),ee={},ensureOverloadTable=(e,r,t)=>{if(void 0===e[r].overloadTable){var n=e[r];e[r]=function(...n){return e[r].overloadTable.hasOwnProperty(n.length)||throwBindingError(`Function '${t}' called with an invalid number of arguments (${n.length}) - expects one of (${e[r].overloadTable})!`),e[r].overloadTable[n.length].apply(this,n)},e[r].overloadTable=[],e[r].overloadTable[n.argCount]=n}},exposePublicSymbol=(r,t,n)=>{e.hasOwnProperty(r)?((void 0===n||void 0!==e[r].overloadTable&&void 0!==e[r].overloadTable[n])&&throwBindingError(`Cannot register public name '${r}' twice`),ensureOverloadTable(e,r,r),e[r].overloadTable.hasOwnProperty(n)&&throwBindingError(`Cannot register multiple overloads of a function with the same number of arguments (${n})!`),e[r].overloadTable[n]=t):(e[r]=t,e[r].argCount=n)},makeLegalFunctionName=e=>{var r=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return r>=48&&r<=57?`_${e}`:e};function RegisteredClass(e,r,t,n,a,o,s,i){this.name=e,this.constructor=r,this.instancePrototype=t,this.rawDestructor=n,this.baseClass=a,this.getActualType=o,this.upcast=s,this.downcast=i,this.pureVirtualFunctions=[]}var upcastPointer=(e,r,t)=>{for(;r!==t;)r.upcast||throwBindingError(`Expected null or instance of ${t.name}, got an instance of ${r.name}`),e=r.upcast(e),r=r.baseClass;return e};function constNoSmartPtrRawPointerToWireType(e,r){if(null===r)return this.isReference&&throwBindingError(`null is not a valid ${this.name}`),0;r.$$||throwBindingError(`Cannot pass "${embindRepr(r)}" as a ${this.name}`),r.$$.ptr||throwBindingError(`Cannot pass deleted object as a pointer of type ${this.name}`);var t=r.$$.ptrType.registeredClass;return upcastPointer(r.$$.ptr,t,this.registeredClass)}function genericPointerToWireType(e,r){if(null===r)return(this.isReference&&throwBindingError(`null is not a valid ${this.name}`),this.isSmartPointer)?(t=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,t),t):0;r&&r.$$||throwBindingError(`Cannot pass "${embindRepr(r)}" as a ${this.name}`),r.$$.ptr||throwBindingError(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&r.$$.ptrType.isConst&&throwBindingError(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);var t,n=r.$$.ptrType.registeredClass;if(t=upcastPointer(r.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(void 0===r.$$.smartPtr&&throwBindingError("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:r.$$.smartPtrType===this?t=r.$$.smartPtr:throwBindingError(`Cannot convert argument of type ${r.$$.smartPtrType?r.$$.smartPtrType.name:r.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:t=r.$$.smartPtr;break;case 2:if(r.$$.smartPtrType===this)t=r.$$.smartPtr;else{var a=r.clone();t=this.rawShare(t,ea.toHandle(()=>a.delete())),null!==e&&e.push(this.rawDestructor,t)}break;default:throwBindingError("Unsupporting sharing policy")}return t}function nonConstNoSmartPtrRawPointerToWireType(e,r){if(null===r)return this.isReference&&throwBindingError(`null is not a valid ${this.name}`),0;r.$$||throwBindingError(`Cannot pass "${embindRepr(r)}" as a ${this.name}`),r.$$.ptr||throwBindingError(`Cannot pass deleted object as a pointer of type ${this.name}`),r.$$.ptrType.isConst&&throwBindingError(`Cannot convert argument of type ${r.$$.ptrType.name} to parameter type ${this.name}`);var t=r.$$.ptrType.registeredClass;return upcastPointer(r.$$.ptr,t,this.registeredClass)}var downcastPointer=(e,r,t)=>{if(r===t)return e;if(void 0===t.baseClass)return null;var n=downcastPointer(e,r,t.baseClass);return null===n?null:t.downcast(n)},er={},getBasestPointer=(e,r)=>{for(void 0===r&&throwBindingError("ptr should not be undefined");e.baseClass;)r=e.upcast(r),e=e.baseClass;return r},getInheritedInstance=(e,r)=>er[r=getBasestPointer(e,r)],makeClassHandle=(e,r)=>(r.ptrType&&r.ptr||throwInternalError("makeClassHandle requires ptr and ptrType"),!!r.smartPtrType!=!!r.smartPtr&&throwInternalError("Both smartPtrType and smartPtr must be specified"),r.count={value:1},attachFinalizer(Object.create(e,{$$:{value:r,writable:!0}})));function RegisteredPointer_fromWireType(e){var r,t=this.getPointee(e);if(!t)return this.destructor(e),null;var n=getInheritedInstance(this.registeredClass,t);if(void 0!==n)if(0===n.$$.count.value)return n.$$.ptr=t,n.$$.smartPtr=e,n.clone();else{var a=n.clone();return this.destructor(e),a}function makeDefaultHandle(){return this.isSmartPointer?makeClassHandle(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):makeClassHandle(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var o=ee[this.registeredClass.getActualType(t)];if(!o)return makeDefaultHandle.call(this);r=this.isConst?o.constPointerType:o.pointerType;var s=downcastPointer(t,this.registeredClass,r.registeredClass);return null===s?makeDefaultHandle.call(this):this.isSmartPointer?makeClassHandle(r.registeredClass.instancePrototype,{ptrType:r,ptr:s,smartPtrType:this,smartPtr:e}):makeClassHandle(r.registeredClass.instancePrototype,{ptrType:r,ptr:s})}function RegisteredPointer(e,r,t,n,a,o,s,i,c,u,l){this.name=e,this.registeredClass=r,this.isReference=t,this.isConst=n,this.isSmartPointer=a,this.pointeeType=o,this.sharingPolicy=s,this.rawGetPointee=i,this.rawConstructor=c,this.rawShare=u,this.rawDestructor=l,a||void 0!==r.baseClass?this.toWireType=genericPointerToWireType:(n?this.toWireType=constNoSmartPtrRawPointerToWireType:this.toWireType=nonConstNoSmartPtrRawPointerToWireType,this.destructorFunction=null)}var replacePublicSymbol=(r,t,n)=>{e.hasOwnProperty(r)||throwInternalError("Replacing nonexistent public symbol"),void 0!==e[r].overloadTable&&void 0!==n?e[r].overloadTable[n]=t:(e[r]=t,e[r].argCount=n)},getWasmTableEntry=e=>b.get(e),dynCall=(e,r,t=[],n=!1)=>{var a=getWasmTableEntry(r)(...t);return"p"==e[0]?a>>>0:a},getDynCaller=(e,r,t=!1)=>(...n)=>dynCall(e,r,n,t),embind__requireFunction=(e,r,t=!1)=>{var n=(e=readLatin1String(e)).includes("p")?getDynCaller(e,r,t):getWasmTableEntry(r);return"function"!=typeof n&&throwBindingError(`unknown function pointer with signature ${e}: ${r}`),n};let UnboundTypeError=class UnboundTypeError extends Error{};var getTypeName=e=>{var r=eb(e),t=readLatin1String(r);return eO(r),t},throwUnboundTypeError=(e,r)=>{var t=[],n={};function visit(e){if(!n[e]&&!Y[e]){if(X[e])return void X[e].forEach(visit);t.push(e),n[e]=!0}}throw r.forEach(visit),new UnboundTypeError(`${e}: `+t.map(getTypeName).join([", "]))};function __embind_register_class(e,r,t,n,a,o,s,i,c,u,l,p,d){e>>>=0,r>>>=0,t>>>=0,n>>>=0,a>>>=0,o>>>=0,s>>>=0,i>>>=0,c>>>=0,u>>>=0,l>>>=0,p>>>=0,d>>>=0,l=readLatin1String(l),o=embind__requireFunction(a,o),i&&=embind__requireFunction(s,i),u&&=embind__requireFunction(c,u),d=embind__requireFunction(p,d);var h=makeLegalFunctionName(l);exposePublicSymbol(h,function(){throwUnboundTypeError(`Cannot construct ${l} due to unbound types`,[n])}),whenDependentTypesAreResolved([e,r,t],n?[n]:[],r=>{r=r[0];var t,a=n?(t=r.registeredClass).instancePrototype:ClassHandle.prototype,s=createNamedFunction(l,function(...e){if(Object.getPrototypeOf(this)!==c)throw new q(`Use 'new' to construct ${l}`);if(void 0===p.constructor_body)throw new q(`${l} has no accessible constructor`);var r=p.constructor_body[e.length];if(void 0===r)throw new q(`Tried to invoke ctor of ${l} with invalid number of parameters (${e.length}) - expected (${Object.keys(p.constructor_body).toString()}) parameters instead!`);return r.apply(this,e)}),c=Object.create(a,{constructor:{value:s}});s.prototype=c;var p=new RegisteredClass(l,s,c,d,t,o,i,u);p.baseClass&&(p.baseClass.__derivedClasses??=[],p.baseClass.__derivedClasses.push(p));var m=new RegisteredPointer(l,p,!0,!1,!1),f=new RegisteredPointer(l+"*",p,!1,!1,!1),g=new RegisteredPointer(l+" const*",p,!1,!0,!1);return ee[e]={pointerType:f,constPointerType:g},replacePublicSymbol(h,s),[m,f,g]})}function usesDestructorStack(e){for(var r=1;r<e.length;++r)if(null!==e[r]&&void 0===e[r].destructorFunction)return!0;return!1}function createJsInvoker(e,r,t,n){var a=usesDestructorStack(e),o=e.length-2,s=[],i=["fn"];r&&i.push("thisWired");for(var c=0;c<o;++c)s.push(`arg${c}`),i.push(`arg${c}Wired`);s=s.join(","),i=i.join(",");var u=`return function (${s}) {
`;a&&(u+="var destructors = [];\n");var l=a?"destructors":"null",p=["humanName","throwBindingError","invoker","fn","runDestructors","retType","classParam"];r&&(u+=`var thisWired = classParam['toWireType'](${l}, this);
`);for(var c=0;c<o;++c)u+=`var arg${c}Wired = argType${c}['toWireType'](${l}, arg${c});
`,p.push(`argType${c}`);if(u+=(t||n?"var rv = ":"")+`invoker(${i});
`,a)u+="runDestructors(destructors);\n";else for(var c=r?1:2;c<e.length;++c){var d=1===c?"thisWired":"arg"+(c-2)+"Wired";null!==e[c].destructorFunction&&(u+=`${d}_dtor(${d});
`,p.push(`${d}_dtor`))}return t&&(u+="var ret = retType['fromWireType'](rv);\nreturn ret;\n"),[p,u+="}\n"]}function craftInvokerFunction(e,r,t,n,a,o){var s=r.length;s<2&&throwBindingError("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var i=null!==r[1]&&null!==t,c=usesDestructorStack(r),u="void"!==r[0].name,l=[e,throwBindingError,n,a,runDestructors,r[0],r[1]],p=0;p<s-2;++p)l.push(r[p+2]);if(!c)for(var p=i?1:2;p<r.length;++p)null!==r[p].destructorFunction&&l.push(r[p].destructorFunction);let[d,h]=createJsInvoker(r,i,u,o);return createNamedFunction(e,Function(...d,h)(...l))}var heap32VectorToArray=(e,r)=>{for(var t=[],n=0;n<e;n++)t.push(m[r+4*n>>>2>>>0]);return t},getFunctionName=e=>{let r=(e=e.trim()).indexOf("(");return -1===r?e:e.slice(0,r)},validateThis=(e,r,t)=>(e instanceof Object||throwBindingError(`${t} with invalid "this": ${e}`),e instanceof r.registeredClass.constructor||throwBindingError(`${t} incompatible with "this" of type ${e.constructor.name}`),e.$$.ptr||throwBindingError(`cannot call emscripten binding method ${t} on deleted object`),upcastPointer(e.$$.ptr,e.$$.ptrType.registeredClass,r.registeredClass)),et=[],en=[];function __emval_decref(e){(e>>>=0)>9&&0==--en[e+1]&&(en[e]=void 0,et.push(e))}var ea={toValue:e=>(e||throwBindingError(`Cannot use deleted val. handle = ${e}`),en[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{let r=et.pop()||en.length;return en[r]=e,en[r+1]=1,r}}}},eo={name:"emscripten::val",fromWireType:e=>{var r=ea.toValue(e);return __emval_decref(e),r},toWireType:(e,r)=>ea.toHandle(r),argPackAdvance:J,readValueFromPointer:readPointer,destructorFunction:null};function __embind_register_emval(e){return registerType(e>>>=0,eo)}var enumReadValueFromPointer=(e,r,t)=>{switch(r){case 1:return t?function(e){return this.fromWireType(u[e>>>0])}:function(e){return this.fromWireType(l[e>>>0])};case 2:return t?function(e){return this.fromWireType(p[e>>>1>>>0])}:function(e){return this.fromWireType(d[e>>>1>>>0])};case 4:return t?function(e){return this.fromWireType(h[e>>>2>>>0])}:function(e){return this.fromWireType(m[e>>>2>>>0])};default:throw TypeError(`invalid integer width (${r}): ${e}`)}};function __embind_register_enum(e,r,t,n){function ctor(){}e>>>=0,r>>>=0,t>>>=0,r=readLatin1String(r),ctor.values={},registerType(e,{name:r,constructor:ctor,fromWireType:function(e){return this.constructor.values[e]},toWireType:(e,r)=>r.value,argPackAdvance:J,readValueFromPointer:enumReadValueFromPointer(r,t,n),destructorFunction:null}),exposePublicSymbol(r,ctor)}var requireRegisteredType=(e,r)=>{var t=Y[e];return void 0===t&&throwBindingError(`${r} has unknown type ${getTypeName(e)}`),t};function __embind_register_enum_value(e,r,t){r>>>=0;var n=requireRegisteredType(e>>>=0,"enum");r=readLatin1String(r);var a=n.constructor,o=Object.create(n.constructor.prototype,{value:{value:t},constructor:{value:createNamedFunction(`${n.name}_${r}`,function(){})}});a.values[t]=o,a[r]=o}var floatReadValueFromPointer=(e,r)=>{switch(r){case 4:return function(e){return this.fromWireType(f[e>>>2>>>0])};case 8:return function(e){return this.fromWireType(w[e>>>3>>>0])};default:throw TypeError(`invalid float width (${r}): ${e}`)}};function __embind_register_integer(e,r,t,n,a){e>>>=0,r>>>=0,t>>>=0,r=readLatin1String(r),-1===a&&(a=0xffffffff);var o,fromWireType=e=>e;if(0===n){var s=32-8*t;fromWireType=e=>e<<s>>>s}var i=r.includes("unsigned"),checkAssertions=(e,r)=>{};registerType(e,{name:r,fromWireType,toWireType:i?function(e,r){return checkAssertions(r,this.name),r>>>0}:function(e,r){return checkAssertions(r,this.name),r},argPackAdvance:J,readValueFromPointer:integerReadValueFromPointer(r,t,0!==n),destructorFunction:null})}function __embind_register_memory_view(e,r,t){t>>>=0;var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][r];function decodeMemoryView(e){var r=m[e>>>2>>>0],t=m[e+4>>>2>>>0];return new n(u.buffer,t,r)}registerType(e>>>=0,{name:t=readLatin1String(t),fromWireType:decodeMemoryView,argPackAdvance:J,readValueFromPointer:decodeMemoryView},{ignoreDuplicateRegistrations:!0})}var es=Object.assign({optional:!0},eo);function __embind_register_optional(e,r){registerType(e>>>=0,es)}var stringToUTF8=(e,r,t)=>stringToUTF8Array(e,l,r,t);function __embind_register_std_string(e,r){r>>>=0,registerType(e>>>=0,{name:r=readLatin1String(r),fromWireType(e){for(var r,t,n=m[e>>>2>>>0],a=e+4,o=a,r=0;r<=n;++r){var s=a+r;if(r==n||0==l[s>>>0]){var i=s-o,c=UTF8ToString(o,i);void 0===t?t=c:(t+="\0",t+=c),o=s+1}}return eO(e),t},toWireType(e,r){r instanceof ArrayBuffer&&(r=new Uint8Array(r));var t,n="string"==typeof r;n||ArrayBuffer.isView(r)&&1==r.BYTES_PER_ELEMENT||throwBindingError("Cannot pass non-string to std::string");var a=eT(4+(t=n?lengthBytesUTF8(r):r.length)+1),o=a+4;if(m[a>>>2>>>0]=t,n)if(0)for(var s=0;s<t;++s){var i=r.charCodeAt(s);i>255&&(eO(a),throwBindingError("String has UTF-16 code units that do not fit in 8 bits")),l[o+s>>>0]=i}else stringToUTF8(r,o,t+1);else l.set(r,o>>>0);return null!==e&&e.push(eO,a),a},argPackAdvance:J,readValueFromPointer:readPointer,destructorFunction(e){eO(e)}})}var ei="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,UTF16ToString=(e,r)=>{for(var t=e,n=t>>1,a=n+r/2;!(n>=a)&&d[n>>>0];)++n;if((t=n<<1)-e>32&&ei)return ei.decode(l.subarray(e>>>0,t>>>0));for(var o="",s=0;!(s>=r/2);++s){var i=p[e+2*s>>>1>>>0];if(0==i)break;o+=String.fromCharCode(i)}return o},stringToUTF16=(e,r,t)=>{if((t??=0x7fffffff)<2)return 0;for(var n=r,a=(t-=2)<2*e.length?t/2:e.length,o=0;o<a;++o){var s=e.charCodeAt(o);p[r>>>1>>>0]=s,r+=2}return p[r>>>1>>>0]=0,r-n},lengthBytesUTF16=e=>2*e.length,UTF32ToString=(e,r)=>{for(var t=0,n="";!(t>=r/4);){var a=h[e+4*t>>>2>>>0];if(0==a)break;if(++t,a>=65536){var o=a-65536;n+=String.fromCharCode(55296|o>>10,56320|1023&o)}else n+=String.fromCharCode(a)}return n},stringToUTF32=(e,r,t)=>{if(r>>>=0,(t??=0x7fffffff)<4)return 0;for(var n=r,a=n+t-4,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o)),h[r>>>2>>>0]=s,(r+=4)+4>a)break}return h[r>>>2>>>0]=0,r-n},lengthBytesUTF32=e=>{for(var r=0,t=0;t<e.length;++t){var n=e.charCodeAt(t);n>=55296&&n<=57343&&++t,r+=4}return r};function __embind_register_user_type(e,r){__embind_register_emval(e>>>=0)}function __embind_register_value_object(e,r,t,n,a,o){r>>>=0,t>>>=0,n>>>=0,a>>>=0,o>>>=0,U[e>>>=0]={name:readLatin1String(r),rawConstructor:embind__requireFunction(t,n),rawDestructor:embind__requireFunction(a,o),fields:[]}}function __embind_register_value_object_field(e,r,t,n,a,o,s,i,c,u){r>>>=0,t>>>=0,n>>>=0,a>>>=0,o>>>=0,s>>>=0,i>>>=0,c>>>=0,u>>>=0,U[e>>>=0].fields.push({fieldName:readLatin1String(r),getterReturnType:t,getter:embind__requireFunction(n,a),getterContext:o,setterArgumentType:s,setter:embind__requireFunction(i,c),setterContext:u})}var inetPton4=e=>{for(var r=e.split("."),t=0;t<4;t++){var n=Number(r[t]);if(isNaN(n))return null;r[t]=n}return(r[0]|r[1]<<8|r[2]<<16|r[3]<<24)>>>0},inetPton6=e=>{var r,t,n,a,o=[];if(!/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i.test(e))return null;if("::"===e)return[0,0,0,0,0,0,0,0];for((e=e.startsWith("::")?e.replace("::","Z:"):e.replace("::",":Z:")).indexOf(".")>0?((r=(e=e.replace(RegExp("[.]","g"),":")).split(":"))[r.length-4]=Number(r[r.length-4])+256*Number(r[r.length-3]),r[r.length-3]=Number(r[r.length-2])+256*Number(r[r.length-1]),r=r.slice(0,r.length-2)):r=e.split(":"),n=0,a=0,t=0;t<r.length;t++)if("string"==typeof r[t])if("Z"===r[t]){for(a=0;a<8-r.length+1;a++)o[t+a]=0;n=a-1}else o[t+n]=eE(parseInt(r[t],16));else o[t+n]=r[t];return[o[1]<<16|o[0],o[3]<<16|o[2],o[5]<<16|o[4],o[7]<<16|o[6]]},ec={address_map:{id:1,addrs:{},names:{}},lookup_name(e){var r,t=inetPton4(e);if(null!==t||null!==(t=inetPton6(e)))return e;if(ec.address_map.addrs[e])r=ec.address_map.addrs[e];else{var n=ec.address_map.id++;assert(n<65535,"exceeded max address mappings of 65535"),r="172.29."+(255&n)+"."+(65280&n),ec.address_map.names[r]=e,ec.address_map.addrs[e]=r}return r},lookup_addr:e=>ec.address_map.names[e]?ec.address_map.names[e]:null};function __emscripten_lookup_name(e){var r=UTF8ToString(e>>>=0);return inetPton4(ec.lookup_name(r))}var eu=0,emval_returnValue=(e,r,t)=>{var n=[],a=e.toWireType(n,t);return n.length&&(m[r>>>2>>>0]=ea.toHandle(n)),a};function __emval_as(e,r,t){return e>>>=0,r>>>=0,t>>>=0,e=ea.toValue(e),emval_returnValue(r=requireRegisteredType(r,"emval::as"),t,e)}var el={},getStringOrSymbol=e=>{var r=el[e];return void 0===r?readLatin1String(e):r},ep=[];function __emval_call_method(e,r,t,n,a){return e>>>=0,r>>>=0,t>>>=0,n>>>=0,a>>>=0,(e=ep[e])(r=ea.toValue(r),r[t=getStringOrSymbol(t)],n,a)}var emval_addMethodCaller=e=>{var r=ep.length;return ep.push(e),r},emval_lookupTypes=(e,r)=>{for(var t=Array(e),n=0;n<e;++n)t[n]=requireRegisteredType(m[r+4*n>>>2>>>0],`parameter ${n}`);return t};function __emval_get_method_caller(e,r,t){var n=emval_lookupTypes(e,r>>>=0),a=n.shift();e--;var o=`return function (obj, func, destructorsRef, args) {
`,s=0,i=[];0===t&&i.push("obj");for(var c=["retType"],u=[a],l=0;l<e;++l)i.push(`arg${l}`),c.push(`argType${l}`),u.push(n[l]),o+=`  var arg${l} = argType${l}.readValueFromPointer(args${s?"+"+s:""});
`,s+=n[l].argPackAdvance;o+=`  var rv = ${1===t?"new func":"func.call"}(${i.join(", ")});
`,a.isVoid||(c.push("emval_returnValue"),u.push(emval_returnValue),o+="  return emval_returnValue(retType, destructorsRef, rv);\n");var p=Function(...c,o+="};\n")(...u);return emval_addMethodCaller(createNamedFunction(`methodCaller<(${n.map(e=>e.name).join(", ")}) => ${a.name}>`,p))}function __emval_get_property(e,r){return e>>>=0,r>>>=0,e=ea.toValue(e),r=ea.toValue(r),ea.toHandle(e[r])}function __emval_incref(e){(e>>>=0)>9&&(en[e+1]+=1)}function __emval_new_array(){return ea.toHandle([])}function __emval_new_array_from_memory_view(e){e>>>=0;for(var r=Array((e=ea.toValue(e)).length),t=0;t<e.length;t++)r[t]=e[t];return ea.toHandle(r)}function __emval_new_cstring(e){return e>>>=0,ea.toHandle(getStringOrSymbol(e))}function __emval_run_destructors(e){e>>>=0,runDestructors(ea.toValue(e)),__emval_decref(e)}function __emval_take_value(e,r){e>>>=0,r>>>=0;var t=(e=requireRegisteredType(e,"_emval_take_value")).readValueFromPointer(r);return ea.toHandle(t)}var isLeapYear=e=>e%4==0&&(e%100!=0||e%400==0),ed=[0,31,60,91,121,152,182,213,244,274,305,335],eh=[0,31,59,90,120,151,181,212,243,273,304,334],ydayFromDate=e=>(isLeapYear(e.getFullYear())?ed:eh)[e.getMonth()]+e.getDate()-1;function __localtime_js(e,r){e=bigintToI53Checked(e),r>>>=0;var t=new Date(1e3*e);h[r>>>2>>>0]=t.getSeconds(),h[r+4>>>2>>>0]=t.getMinutes(),h[r+8>>>2>>>0]=t.getHours(),h[r+12>>>2>>>0]=t.getDate(),h[r+16>>>2>>>0]=t.getMonth(),h[r+20>>>2>>>0]=t.getFullYear()-1900,h[r+24>>>2>>>0]=t.getDay();var n=0|ydayFromDate(t);h[r+28>>>2>>>0]=n,h[r+36>>>2>>>0]=-(60*t.getTimezoneOffset());var a=new Date(t.getFullYear(),0,1),o=new Date(t.getFullYear(),6,1).getTimezoneOffset(),s=a.getTimezoneOffset(),i=0|(o!=s&&t.getTimezoneOffset()==Math.min(s,o));h[r+32>>>2>>>0]=i}var em={},handleException=e=>{if(e instanceof ExitStatus||"unwind"==e)return c;quit_(1,e)},keepRuntimeAlive=()=>D||eu>0,_proc_exit=r=>{c=r,keepRuntimeAlive()||(e.onExit?.(r),k=!0),quit_(r,new ExitStatus(r))},_exit=(e,r)=>{c=e,_proc_exit(e)},maybeExit=()=>{if(!keepRuntimeAlive())try{_exit(c)}catch(e){handleException(e)}},callUserCallback=e=>{if(!k)try{e(),maybeExit()}catch(e){handleException(e)}},_emscripten_get_now=()=>performance.now(),_emscripten_date_now=()=>Date.now(),checkWasiClock=e=>e>=0&&e<=3;function _clock_time_get(e,r,t){if(r=bigintToI53Checked(r),t>>>=0,!checkWasiClock(e))return 28;if(0===e)n=_emscripten_date_now();else{0;n=_emscripten_get_now()}var n,a=Math.round(1e3*n*1e3);return g[t>>>3]=BigInt(a),0}var getHeapMax=()=>0xffff0000;function _emscripten_get_heap_max(){return getHeapMax()}var alignMemory=(e,r)=>Math.ceil(e/r)*r,growMemory=e=>{var r=(e-i.buffer.byteLength+65535)/65536|0;try{return i.grow(r),updateMemoryViews(),1}catch(e){}};function _emscripten_resize_heap(e){e>>>=0;var r=l.length,t=getHeapMax();if(e>t)return!1;for(var n=1;n<=4;n*=2){var a=r*(1+.2/n);if(a=Math.min(a,e+0x6000000),growMemory(Math.min(t,alignMemory(Math.max(e,a),65536))))return!0}return!1}var ef={},getExecutableName=()=>O||"./this.program",getEnvStrings=()=>{if(!getEnvStrings.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:getExecutableName()};for(var r in ef)void 0===ef[r]?delete e[r]:e[r]=ef[r];var t=[];for(var r in e)t.push(`${r}=${e[r]}`);getEnvStrings.strings=t}return getEnvStrings.strings};function _environ_get(e,r){e>>>=0,r>>>=0;var t=0,n=0;for(var a of getEnvStrings()){var o=r+t;m[e+n>>>2>>>0]=o,t+=stringToUTF8(a,o,1/0)+1,n+=4}return 0}function _environ_sizes_get(e,r){e>>>=0,r>>>=0;var t=getEnvStrings();m[e>>>2>>>0]=t.length;var n=0;for(var a of t)n+=lengthBytesUTF8(a)+1;return m[r>>>2>>>0]=n,0}function _fd_close(e){try{var r=V.getStreamFromFD(e);return G.close(r),0}catch(e){if(void 0===G||"ErrnoError"!==e.name)throw e;return e.errno}}var doReadv=(e,r,t,n)=>{for(var a=0,o=0;o<t;o++){var s=m[r>>>2>>>0],i=m[r+4>>>2>>>0];r+=8;var c=G.read(e,u,s,i,n);if(c<0)return -1;if(a+=c,c<i)break;void 0!==n&&(n+=c)}return a};function _fd_read(e,r,t,n){r>>>=0,t>>>=0,n>>>=0;try{var a=V.getStreamFromFD(e),o=doReadv(a,r,t);return m[n>>>2>>>0]=o,0}catch(e){if(void 0===G||"ErrnoError"!==e.name)throw e;return e.errno}}function _fd_seek(e,r,t,n){r=bigintToI53Checked(r),n>>>=0;try{if(isNaN(r))return 61;var a=V.getStreamFromFD(e);return G.llseek(a,r,t),g[n>>>3]=BigInt(a.position),a.getdents&&0===r&&0===t&&(a.getdents=null),0}catch(e){if(void 0===G||"ErrnoError"!==e.name)throw e;return e.errno}}var doWritev=(e,r,t,n)=>{for(var a=0,o=0;o<t;o++){var s=m[r>>>2>>>0],i=m[r+4>>>2>>>0];r+=8;var c=G.write(e,u,s,i,n);if(c<0)return -1;if(a+=c,c<i)break;void 0!==n&&(n+=c)}return a};function _fd_write(e,r,t,n){r>>>=0,t>>>=0,n>>>=0;try{var a=V.getStreamFromFD(e),o=doWritev(a,r,t);return m[n>>>2>>>0]=o,0}catch(e){if(void 0===G||"ErrnoError"!==e.name)throw e;return e.errno}}G.createPreloadedFile=(e,r,t,n,a,o,s,i,c,u)=>{var l=r?I.resolve(B.join2(e,r)):e,p=getUniqueRunDependency(`cp ${l}`);function processData(t){function finish(t){u?.(),i||FS_createDataFile(e,r,t,n,a,c),o?.(),removeRunDependency(p)}FS_handledByPreloadPlugin(t,l,finish,()=>{s?.(),removeRunDependency(p)})||finish(t)}addRunDependency(p),"string"==typeof t?asyncLoad(t).then(processData,s):processData(t)},G.staticInit(),z.doesNotExistError=new G.ErrnoError(44),z.doesNotExistError.stack="<generic error, no stack>";for(var eg=Array(256),ev=0;ev<256;++ev)eg[ev]=String.fromCharCode(ev);y=eg;let ew=ClassHandle.prototype;Object.assign(ew,{isAliasOf(e){if(!(this instanceof ClassHandle)||!(e instanceof ClassHandle))return!1;var r=this.$$.ptrType.registeredClass,t=this.$$.ptr;e.$$=e.$$;for(var n=e.$$.ptrType.registeredClass,a=e.$$.ptr;r.baseClass;)t=r.upcast(t),r=r.baseClass;for(;n.baseClass;)a=n.upcast(a),n=n.baseClass;return r===n&&t===a},clone(){if(this.$$.ptr||throwInstanceAlreadyDeleted(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=attachFinalizer(Object.create(Object.getPrototypeOf(this),{$$:{value:shallowCopyInternalPointer(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},delete(){this.$$.ptr||throwInstanceAlreadyDeleted(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&throwBindingError("Object already scheduled for deletion"),detachFinalizer(this),releaseClassHandle(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||throwInstanceAlreadyDeleted(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&throwBindingError("Object already scheduled for deletion"),Q.push(this),1===Q.length&&S&&S(flushPendingDeletes),this.$$.deleteScheduled=!0,this}});let e_=Symbol.dispose;e_&&(ew[e_]=ew.delete),Object.assign(RegisteredPointer.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){this.rawDestructor?.(e)},argPackAdvance:J,readValueFromPointer:readPointer,fromWireType:RegisteredPointer_fromWireType}),en.push(0,1,void 0,1,null,1,!0,1,!1,1),e.count_emval_handles=()=>en.length/2-5-et.length,e.noExitRuntime&&(D=e.noExitRuntime),e.preloadPlugins&&(L=e.preloadPlugins),e.print&&(C=e.print),e.printErr&&(P=e.printErr),e.wasmBinary&&(s=e.wasmBinary),e.arguments&&e.arguments,e.thisProgram&&(O=e.thisProgram);var ey={da:function(){return e.HEAP8.length},a:___cxa_throw,Y:___syscall_chmod,Z:___syscall_faccessat,y:___syscall_fcntl64,V:___syscall_fstat64,ba:___syscall_ioctl,T:___syscall_lstat64,S:___syscall_newfstatat,A:___syscall_openat,M:___syscall_rmdir,U:___syscall_stat64,N:___syscall_unlinkat,L:()=>abort(""),p:function(e){var r=U[e>>>=0];delete U[e];var t=r.rawConstructor,n=r.rawDestructor,a=r.fields;whenDependentTypesAreResolved([e],a.map(e=>e.getterReturnType).concat(a.map(e=>e.setterArgumentType)),e=>{var o={};return a.forEach((r,t)=>{var n=r.fieldName,s=e[t],i=e[t].optional,c=r.getter,u=r.getterContext,l=e[t+a.length],p=r.setter,d=r.setterContext;o[n]={read:e=>s.fromWireType(c(u,e)),write:(e,r)=>{var t=[];p(d,e,l.toWireType(t,r)),runDestructors(t)},optional:i}}),[{name:r.name,fromWireType:e=>{var r={};for(var t in o)r[t]=o[t].read(e);return n(e),r},toWireType:(e,r)=>{for(var a in o)if(!(a in r)&&!o[a].optional)throw TypeError(`Missing field: "${a}"`);var s=t();for(a in o)o[a].write(s,r[a]);return null!==e&&e.push(n,s),s},argPackAdvance:J,readValueFromPointer:readPointer,destructorFunction:n}]})},D:__embind_register_bigint,ga:__embind_register_bool,e:__embind_register_class,c:function(e,r,t,n,a,o,s,i,c){e>>>=0,r>>>=0,n>>>=0,a>>>=0,o>>>=0,s>>>=0;var u=heap32VectorToArray(t,n);r=getFunctionName(r=readLatin1String(r)),o=embind__requireFunction(a,o,i),whenDependentTypesAreResolved([],[e],e=>{e=e[0];var n=`${e.name}.${r}`;function unboundTypesHandler(){throwUnboundTypeError(`Cannot call ${n} due to unbound types`,u)}r.startsWith("@@")&&(r=Symbol[r.substring(2)]);var a=e.registeredClass.constructor;return void 0===a[r]?(unboundTypesHandler.argCount=t-1,a[r]=unboundTypesHandler):(ensureOverloadTable(a,r,n),a[r].overloadTable[t-1]=unboundTypesHandler),whenDependentTypesAreResolved([],u,c=>{var u=craftInvokerFunction(n,[c[0],null].concat(c.slice(1)),null,o,s,i);if(void 0===a[r].overloadTable?(u.argCount=t-1,a[r]=u):a[r].overloadTable[t-1]=u,e.registeredClass.__derivedClasses)for(let t of e.registeredClass.__derivedClasses)t.constructor.hasOwnProperty(r)||(t.constructor[r]=u);return[]}),[]})},j:function(e,r,t,n,a,o){e>>>=0,t>>>=0,n>>>=0,a>>>=0,o>>>=0;var s=heap32VectorToArray(r,t);a=embind__requireFunction(n,a),whenDependentTypesAreResolved([],[e],e=>{e=e[0];var t=`constructor ${e.name}`;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[r-1])throw new q(`Cannot register multiple constructors with identical number of parameters (${r-1}) for class '${e.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return e.registeredClass.constructor_body[r-1]=()=>{throwUnboundTypeError(`Cannot construct ${e.name} due to unbound types`,s)},whenDependentTypesAreResolved([],s,n=>(n.splice(1,0,null),e.registeredClass.constructor_body[r-1]=craftInvokerFunction(t,n,null,a,o),[])),[]})},b:function(e,r,t,n,a,o,s,i,c,u){e>>>=0,r>>>=0,n>>>=0,a>>>=0,o>>>=0,s>>>=0;var l=heap32VectorToArray(t,n);r=getFunctionName(r=readLatin1String(r)),o=embind__requireFunction(a,o,c),whenDependentTypesAreResolved([],[e],e=>{e=e[0];var n=`${e.name}.${r}`;function unboundTypesHandler(){throwUnboundTypeError(`Cannot call ${n} due to unbound types`,l)}r.startsWith("@@")&&(r=Symbol[r.substring(2)]),i&&e.registeredClass.pureVirtualFunctions.push(r);var a=e.registeredClass.instancePrototype,u=a[r];return void 0===u||void 0===u.overloadTable&&u.className!==e.name&&u.argCount===t-2?(unboundTypesHandler.argCount=t-2,unboundTypesHandler.className=e.name,a[r]=unboundTypesHandler):(ensureOverloadTable(a,r,n),a[r].overloadTable[t-2]=unboundTypesHandler),whenDependentTypesAreResolved([],l,i=>{var u=craftInvokerFunction(n,i,e,o,s,c);return void 0===a[r].overloadTable?(u.argCount=t-2,a[r]=u):a[r].overloadTable[t-2]=u,[]}),[]})},g:function(e,r,t,n,a,o,s,i,c,u){e>>>=0,r>>>=0,t>>>=0,n>>>=0,a>>>=0,o>>>=0,s>>>=0,i>>>=0,c>>>=0,u>>>=0,r=readLatin1String(r),a=embind__requireFunction(n,a),whenDependentTypesAreResolved([],[e],e=>{e=e[0];var n=`${e.name}.${r}`,l={get(){throwUnboundTypeError(`Cannot access ${n} due to unbound types`,[t,s])},enumerable:!0,configurable:!0};return c?l.set=()=>throwUnboundTypeError(`Cannot access ${n} due to unbound types`,[t,s]):l.set=e=>throwBindingError(n+" is a read-only property"),Object.defineProperty(e.registeredClass.instancePrototype,r,l),whenDependentTypesAreResolved([],c?[t,s]:[t],t=>{var s=t[0],l={get(){var r=validateThis(this,e,n+" getter");return s.fromWireType(a(o,r))},enumerable:!0};if(c){c=embind__requireFunction(i,c);var p=t[1];l.set=function(r){var t=validateThis(this,e,n+" setter"),a=[];c(u,t,p.toWireType(a,r)),runDestructors(a)}}return Object.defineProperty(e.registeredClass.instancePrototype,r,l),[]}),[]})},ea:__embind_register_emval,w:__embind_register_enum,h:__embind_register_enum_value,C:function(e,r,t){r>>>=0,t>>>=0,registerType(e>>>=0,{name:r=readLatin1String(r),fromWireType:e=>e,toWireType:(e,r)=>r,argPackAdvance:J,readValueFromPointer:floatReadValueFromPointer(r,t),destructorFunction:null})},r:__embind_register_integer,l:__embind_register_memory_view,v:__embind_register_optional,fa:__embind_register_std_string,z:function(e,r,t){var n,a,o,s;e>>>=0,r>>>=0,t>>>=0,t=readLatin1String(t),2===r?(n=UTF16ToString,a=stringToUTF16,s=lengthBytesUTF16,o=e=>d[e>>>1>>>0]):4===r&&(n=UTF32ToString,a=stringToUTF32,s=lengthBytesUTF32,o=e=>m[e>>>2>>>0]),registerType(e,{name:t,fromWireType:e=>{for(var t,a=m[e>>>2>>>0],s=e+4,i=0;i<=a;++i){var c=e+4+i*r;if(i==a||0==o(c)){var u=c-s,l=n(s,u);void 0===t?t=l:(t+="\0",t+=l),s=c+r}}return eO(e),t},toWireType:(e,n)=>{"string"!=typeof n&&throwBindingError(`Cannot pass non-string to C++ string type ${t}`);var o=s(n),i=eT(4+o+r);return m[i>>>2>>>0]=o/r,a(n,i+4,o+r),null!==e&&e.push(eO,i),i},argPackAdvance:J,readValueFromPointer:readPointer,destructorFunction(e){eO(e)}})},k:__embind_register_user_type,q:__embind_register_value_object,m:__embind_register_value_object_field,ha:function(e,r){r>>>=0,registerType(e>>>=0,{isVoid:!0,name:r=readLatin1String(r),argPackAdvance:0,fromWireType:()=>void 0,toWireType:(e,r)=>void 0})},G:__emscripten_lookup_name,K:()=>{D=!1,eu=0},n:__emval_as,t:__emval_call_method,d:__emval_decref,s:__emval_get_method_caller,E:__emval_get_property,f:__emval_incref,u:__emval_new_array,B:__emval_new_array_from_memory_view,ia:__emval_new_cstring,i:__emval_run_destructors,o:__emval_take_value,O:__localtime_js,F:(e,r)=>{if(em[e]&&(clearTimeout(em[e].id),delete em[e]),!r)return 0;var t=setTimeout(()=>{delete em[e],callUserCallback(()=>eC(e,_emscripten_get_now()))},r);return em[e]={id:t,timeout_ms:r},0},_:function(e,r,t,n){e>>>=0,r>>>=0,t>>>=0,n>>>=0;var a=new Date().getFullYear(),o=new Date(a,0,1),s=new Date(a,6,1),i=o.getTimezoneOffset(),c=s.getTimezoneOffset(),u=Math.max(i,c);m[e>>>2>>>0]=60*u,h[r>>>2>>>0]=Number(i!=c);var extractZone=e=>{var r=Math.abs(e),t=String(Math.floor(r/60)).padStart(2,"0"),n=String(r%60).padStart(2,"0");return`UTC${e>=0?"-":"+"}${t}${n}`},l=extractZone(i),p=extractZone(c);c<i?(stringToUTF8(l,t,17),stringToUTF8(p,n,17)):(stringToUTF8(l,n,17),stringToUTF8(p,t,17))},X:_clock_time_get,W:_emscripten_date_now,I:_emscripten_get_heap_max,H:_emscripten_resize_heap,Q:_environ_get,R:_environ_sizes_get,ca:_exit,x:_fd_close,aa:_fd_read,P:_fd_seek,$:_fd_write,J:_proc_exit},eS=await createWasm();eS.ka;var eb=eS.la,eT=eS.ma,eO=eS.na,eE=eS.pa,eC=eS.qa;function applySignatureConversions(e){let r;e=Object.assign({},e);var makeWrapper_pp=e=>r=>e(r)>>>0;return e.la=makeWrapper_pp(e.la),e.ma=makeWrapper_pp(e.ma),e._emscripten_stack_alloc=makeWrapper_pp(e._emscripten_stack_alloc),e.emscripten_stack_get_current=(r=e.emscripten_stack_get_current,()=>r()>>>0),e}function run(){if(F>0||(preRun(),F>0)){A=run;return}function doRun(){e.calledRun=!0,k||(initRuntime(),r(e),e.onRuntimeInitialized?.(),postRun())}e.setStatus?(e.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>e.setStatus(""),1),doRun()},1)):doRun()}return function(){if(e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.shift()()}(),run(),T};async function initWasm(){return t.g.wasm=await chili_wasm_Module(),t.g.wasm}var n=t(8909);let OccGeometry=class OccGeometry{geometry;_geometryType;_handleGeometry;get geometryType(){return this._geometryType}constructor(e){this.geometry=e,this.#e=!1,this.dispose=()=>{this.#e||(this.#e=!0,this.disposeInternal())},this._handleGeometry=new wasm.Handle_Geom_Geometry(e),this._geometryType=this.getGeometryType(e)}getGeometryType(e){let isKind=r=>wasm.Transient.isKind(e,r);if(isKind("Geom_Curve"))return n.Vl.Curve;if(isKind("Geom_Surface"))return n.Vl.Surface;throw Error("Unknown geometry type")}#e;dispose;disposeInternal(){this._handleGeometry.delete()}transform(e){this.geometry.transform(OcctHelper.convertFromMatrix(e))}};let Mesher=class Mesher{shape;_isMeshed;_lines;_faces;get edges(){return void 0===this._lines&&this.mesh(),this._lines}set edges(e){this._lines=e}get faces(){return void 0===this._faces&&this.mesh(),this._faces}set faces(e){this._faces=e}constructor(e){this.shape=e,this._isMeshed=!1}mesh(){this._isMeshed||(this._isMeshed=!0,(0,n.gc)(e=>{let r=e(new wasm.Mesher(this.shape.shape,.005)),t=e(r.mesh()),n=e(t.faceMeshData),a=e(t.edgeMeshData);this._faces=this.parseFaceMeshData(n),this._lines=this.parseEdgeMeshData(a)}))}parseFaceMeshData(e){return{position:new Float32Array(e.position),normal:new Float32Array(e.normal),uv:new Float32Array(e.uv),index:new Uint32Array(e.index),range:this.getFaceRanges(e),color:n.OI.defaultFaceColor,groups:[]}}parseEdgeMeshData(e){return{lineType:n.SP.Solid,position:new Float32Array(e.position),range:this.getEdgeRanges(e),color:n.OI.defaultEdgeColor}}dispose(){this._faces?.range.forEach(e=>e.shape.dispose()),this._lines?.range.forEach(e=>e.shape.dispose()),this.shape=null,this._faces=null,this._lines=null}getEdgeRanges(e){let r=[];for(let t=0;t<e.edges.length;t++)r.push({start:e.group[2*t],count:e.group[2*t+1],shape:new OccSubEdgeShape(this.shape,e.edges[t],t)});return r}getFaceRanges(e){let r=[];for(let t=0;t<e.faces.length;t++)r.push({start:e.group[2*t],count:e.group[2*t+1],shape:new OccSubFaceShape(this.shape,e.faces[t],t)});return r}};function _ts_decorate(e,r,t,n){var a,o=arguments.length,s=o<3?r:null===n?n=Object.getOwnPropertyDescriptor(r,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,r,t,n);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(s=(o<3?a(s):o>3?a(r,t,s):a(r,t))||s);return o>3&&s&&Object.defineProperty(r,t,s),s}let OccShape=class OccShape{static serialize(e){return{shape:new OccShapeConverter().convertToBrep(e).value,id:e.id}}static deserialize(e,r){let t=new OccShapeConverter().convertFromBrep(e).value;return t._id=r,t}shapeType;_mesh;get mesh(){return this._mesh??=new Mesher(this),this._mesh}_shape;get shape(){return this._shape}_id;get id(){return this._id}get matrix(){return(0,n.gc)(e=>OcctHelper.convertToMatrix(e(e(this.shape.getLocation()).transformation())))}set matrix(e){(0,n.gc)(r=>{let t=r(new wasm.TopLoc_Location(r(OcctHelper.convertFromMatrix(e))));this._shape.setLocation(t,!1),this.onTransformChanged()})}constructor(e,r){this._id=r??n.Id.generate(),this._shape=e,this.shapeType=OcctHelper.getShapeType(e)}transformed(e){return(0,n.gc)(r=>{let t=r(new wasm.TopLoc_Location(r(OcctHelper.convertFromMatrix(e)))),n=this._shape.located(t,!1);return OcctHelper.wrapShape(n)})}transformedMul(e){return(0,n.gc)(r=>{let t=r(new wasm.TopLoc_Location(r(OcctHelper.convertFromMatrix(e)))),n=this._shape.moved(t,!1);return OcctHelper.wrapShape(n)})}onTransformChanged(){this._mesh&&(n.Yd.warn("Shape matrix changed, mesh will be recreated"),this._mesh=void 0)}edgesMeshPosition(){let e=new wasm.Mesher(this.shape,.005),r=e.edgesMeshPosition();return e.delete(),{lineType:n.SP.Solid,position:new Float32Array(r),range:[],color:n.OI.defaultEdgeColor}}clone(){return OcctHelper.wrapShape(wasm.Shape.clone(this._shape))}isClosed(){return wasm.Shape.isClosed(this.shape)}isNull(){return this.shape.isNull()}isEqual(e){return e instanceof OccShape&&this.shape.isEqual(e.shape)}isSame(e){return e instanceof OccShape&&this.shape.isSame(e.shape)}isPartner(e){return e instanceof OccShape&&this.shape.isPartner(e.shape)}orientation(){return OcctHelper.getOrientation(this.shape)}findAncestor(e,r){return r instanceof OccShape?wasm.Shape.findAncestor(r.shape,this.shape,OcctHelper.getShapeEnum(e)).map(e=>OcctHelper.wrapShape(e)):[]}findSubShapes(e){return wasm.Shape.findSubShapes(this.shape,OcctHelper.getShapeEnum(e)).map(e=>OcctHelper.wrapShape(e))}iterShape(){let e=wasm.Shape.iterShape(this.shape);return 1===e.length&&e[0].shapeType()===this.shape.shapeType()&&(e=wasm.Shape.iterShape(e[0])),e.map(e=>OcctHelper.wrapShape(e))}section(e){if(e instanceof OccShape){let r=wasm.Shape.sectionSS(this.shape,e.shape);return OcctHelper.wrapShape(r)}if(e instanceof n.JO){let r=wasm.Shape.sectionSP(this.shape,{location:e.origin,direction:e.normal,xDirection:e.xvec});return OcctHelper.wrapShape(r)}throw Error("Unsupported type")}split(e){let r=e.map(e=>{if(e instanceof OccShape)return e.shape;throw Error("Unsupported type")});return OcctHelper.wrapShape(wasm.Shape.splitByEdgeOrWires(this.shape,r))}reserve(){this.shape.reverse()}#r=!1;dispose=()=>{this.#r||(this.#r=!0,this.disposeInternal())};disposeInternal(){this._shape.nullify(),this._shape.delete(),this._shape=null,this._mesh&&n.Rl.isDisposable(this._mesh)&&(this._mesh.dispose(),this._mesh=null)}};OccShape=_ts_decorate([n.ei.register(["shape","id"],OccShape.deserialize,OccShape.serialize)],OccShape);let OccVertex=class OccVertex extends OccShape{vertex;constructor(e,r){super(e,r),this.vertex=e}};OccVertex=_ts_decorate([n.ei.register(["shape","id"],OccShape.deserialize,OccShape.serialize)],OccVertex);let OccEdge=class OccEdge extends OccShape{_edge;get edge(){return this._edge}constructor(e,r){super(e,r),this._edge=e}update(e){if(!(e instanceof OccCurve))throw Error("Invalid curve");this._shape=wasm.Edge.fromCurve(e.curve),this._mesh=void 0}intersect(e){return(0,n.gc)(r=>{let t;if(e instanceof OccEdge&&(t=e.edge),e instanceof n.zH){let n=r(wasm.Curve.makeLine(e.location,e.direction));t=r(wasm.Edge.fromCurve(n.get()))}if(void 0===t)throw Error("Unsupported type");return wasm.Edge.intersect(this.edge,t).map(e=>({parameter:e.parameter,point:OcctHelper.toXYZ(e.point)}))})}length(){return wasm.Edge.curveLength(this.edge)}_curve;get curve(){return this._curve??=(0,n.gc)(e=>new OccTrimmedCurve(e(wasm.Edge.curve(this.edge)).get())),this._curve}onTransformChanged(){super.onTransformChanged(),this._curve&&(this._curve.dispose(),this._curve=void 0)}offset(e,r){return(0,n.gc)(t=>{let a=t(OcctHelper.toDir(r)),o=wasm.Edge.offset(this.edge,a,e);return o.isNull()?n.x4.err("Offset failed"):n.x4.ok(OcctHelper.wrapShape(o))})}trim(e,r){let t=wasm.Edge.trim(this.edge,e,r);return new OccEdge(t)}disposeInternal(){super.disposeInternal(),this._curve&&n.Rl.isDisposable(this._curve)&&(this._curve.dispose(),this._curve=null)}};OccEdge=_ts_decorate([n.ei.register(["shape","id"],OccShape.deserialize,OccShape.serialize)],OccEdge);let OccWire=class OccWire extends OccShape{wire;constructor(e,r){super(e,r),this.wire=e}edgeLoop(){return wasm.Wire.edgeLoop(this.wire).map(e=>OcctHelper.wrapShape(e))}toFace(){let e=wasm.Wire.makeFace(this.wire);return e.isNull()?n.x4.err("To face failed"):n.x4.ok(new OccFace(e))}offset(e,r){let t=wasm.Wire.offset(this.wire,e,OcctHelper.getJoinType(r));return t.isNull()?n.x4.err("Offset failed"):n.x4.ok(OcctHelper.wrapShape(t))}};OccWire=_ts_decorate([n.ei.register(["shape","id"],OccShape.deserialize,OccShape.serialize)],OccWire);let OccFace=class OccFace extends OccShape{face;constructor(e,r){super(e,r),this.face=e}area(){return wasm.Face.area(this.face)}normal(e,r){return(0,n.gc)(t=>{let n=t(new wasm.gp_Pnt(0,0,0)),a=t(new wasm.gp_Vec(0,0,0));return wasm.Face.normal(this.shape,e,r,n,a),[OcctHelper.toXYZ(n),OcctHelper.toXYZ(a)]})}outerWire(){return new OccWire(wasm.Face.outerWire(this.face))}surface(){return(0,n.gc)(e=>{let r=e(wasm.Face.surface(this.face));return OcctHelper.wrapSurface(r.get())})}segmentsOfEdgeOnFace(e){if(e instanceof OccEdge){let r=wasm.Face.curveOnSurface(this.face,e.edge);if(!n.M8.allEqualZero(r.start,r.end))return r}}};OccFace=_ts_decorate([n.ei.register(["shape","id"],OccShape.deserialize,OccShape.serialize)],OccFace);let OccShell=class OccShell extends OccShape{};OccShell=_ts_decorate([n.ei.register(["shape","id"],OccShape.deserialize,OccShape.serialize)],OccShell);let OccSolid=class OccSolid extends OccShape{solid;constructor(e,r){super(e,r),this.solid=e}volume(){return wasm.Solid.volume(this.solid)}};OccSolid=_ts_decorate([n.ei.register(["shape","id"],OccShape.deserialize,OccShape.serialize)],OccSolid);let OccCompSolid=class OccCompSolid extends OccShape{};OccCompSolid=_ts_decorate([n.ei.register(["shape","id"],OccShape.deserialize,OccShape.serialize)],OccCompSolid);let OccCompound=class OccCompound extends OccShape{};OccCompound=_ts_decorate([n.ei.register(["shape","id"],OccShape.deserialize,OccShape.serialize)],OccCompound);let OccSubEdgeShape=class OccSubEdgeShape extends OccEdge{parent;index;get mesh(){throw Error("Method not implemented.")}constructor(e,r,t,n){super(r,n),this.parent=e,this.index=t}};let OccSubFaceShape=class OccSubFaceShape extends OccFace{parent;index;get mesh(){throw Error("Method not implemented.")}constructor(e,r,t,n){super(r,n),this.parent=e,this.index=t}};let OccCurve=class OccCurve extends OccGeometry{curve;curveType;constructor(e){super(e),this.curve=e,this.curveType=OcctHelper.getCurveType(e)}copy(){return(0,n.gc)(e=>{let r=e(this.curve.copy());return OcctHelper.wrapCurve(r.get())})}transformed(e){return(0,n.gc)(r=>{let t=r(this.curve.transformed(OcctHelper.convertFromMatrix(e)));return OcctHelper.wrapCurve(t.get())})}makeEdge(){return new OccEdge(wasm.Edge.fromCurve(this.curve))}nearestExtrema(e){return(0,n.gc)(r=>{let t;if(e instanceof OccCurve)t=wasm.Curve.nearestExtremaCC(this.curve,e.curve);else if(e instanceof n.zH){let n=r(wasm.Curve.makeLine(e.location,e.direction));t=wasm.Curve.nearestExtremaCC(this.curve,n.get())}if(t)return{...t,p1:OcctHelper.toXYZ(t.p1),p2:OcctHelper.toXYZ(t.p2)}})}uniformAbscissaByLength(e){return wasm.Curve.uniformAbscissaWithLength(this.curve,e).map(e=>OcctHelper.toXYZ(e))}uniformAbscissaByCount(e){return wasm.Curve.uniformAbscissaWithCount(this.curve,e+1).map(e=>OcctHelper.toXYZ(e))}length(){return wasm.Curve.curveLength(this.curve)}trim(e,r){return(0,n.gc)(t=>new OccTrimmedCurve(t(wasm.Curve.trim(this.curve,e,r)).get()))}reverse(){this.curve.reverse()}reversed(){return(0,n.gc)(e=>{let r=e(this.curve.reversed());return OcctHelper.wrapCurve(r.get())})}isClosed(){return this.curve.isClosed()}period(){return this.curve.period()}isPeriodic(){return this.curve.isPeriodic()}continutity(){let e=this.curve.continutity();return OcctHelper.convertContinuity(e)}nearestFromPoint(e){let r=wasm.Curve.projectOrNearest(this.curve,e);return{...r,point:OcctHelper.toXYZ(r.point)}}value(e){return OcctHelper.toXYZ(this.curve.value(e))}firstParameter(){return this.curve.firstParameter()}lastParameter(){return this.curve.lastParameter()}parameter(e,r){return wasm.Curve.parameter(this.curve,e,r)}project(e){return wasm.Curve.projects(this.curve,e).map(e=>new n.vY(e.x,e.y,e.z)).toSorted((r,t)=>r.distanceTo(e)-t.distanceTo(e))}isCN(e){return this.curve.isCN(e)}d0(e){return(0,n.gc)(r=>{let t=r(new wasm.gp_Pnt(0,0,0));return this.curve.d0(e,t),OcctHelper.toXYZ(t)})}d1(e){return(0,n.gc)(r=>{let t=r(new wasm.gp_Pnt(0,0,0)),n=r(new wasm.gp_Vec(0,0,0));return this.curve.d1(e,t,n),{point:OcctHelper.toXYZ(t),vec:OcctHelper.toXYZ(n)}})}d2(e){return(0,n.gc)(r=>{let t=r(new wasm.gp_Pnt(0,0,0)),n=r(new wasm.gp_Vec(0,0,0)),a=r(new wasm.gp_Vec(0,0,0));return this.curve.d2(e,t,n,a),{point:OcctHelper.toXYZ(t),vec1:OcctHelper.toXYZ(n),vec2:OcctHelper.toXYZ(a)}})}d3(e){return(0,n.gc)(r=>{let t=r(new wasm.gp_Pnt(0,0,0)),n=r(new wasm.gp_Vec(0,0,0)),a=r(new wasm.gp_Vec(0,0,0)),o=r(new wasm.gp_Vec(0,0,0));return this.curve.d3(e,t,n,a,o),{point:OcctHelper.toXYZ(t),vec1:OcctHelper.toXYZ(n),vec2:OcctHelper.toXYZ(a),vec3:OcctHelper.toXYZ(o)}})}dn(e,r){return(0,n.gc)(t=>OcctHelper.toXYZ(t(this.curve.dn(e,r))))}};let OccLine=class OccLine extends OccCurve{line;constructor(e){super(e),this.line=e}get direction(){return(0,n.gc)(e=>{let r=e(this.line.position());return OcctHelper.toXYZ(e(r.direction()))})}set direction(e){(0,n.gc)(r=>{this.line.setDirection(r(OcctHelper.toDir(e)))})}get location(){return(0,n.gc)(e=>{let r=e(this.line.position());return OcctHelper.toXYZ(e(r.location()))})}set location(e){(0,n.gc)(r=>{this.line.setLocation(r(OcctHelper.toPnt(e)))})}};let OccConic=class OccConic extends OccCurve{conioc;constructor(e){super(e),this.conioc=e}get axis(){return(0,n.gc)(e=>OcctHelper.toXYZ(e(e(this.conioc.axis()).direction())))}get xAxis(){return(0,n.gc)(e=>OcctHelper.toXYZ(e(e(this.conioc.xAxis()).direction())))}get yAxis(){return(0,n.gc)(e=>OcctHelper.toXYZ(e(e(this.conioc.yAxis()).direction())))}eccentricity(){return this.conioc.eccentricity()}};let OccCircle=class OccCircle extends OccConic{circle;constructor(e){super(e),this.circle=e}get center(){return(0,n.gc)(e=>OcctHelper.toXYZ(e(this.circle.location())))}set center(e){(0,n.gc)(r=>{this.circle.setLocation(r(OcctHelper.toPnt(e)))})}get radius(){return this.circle.radius()}set radius(e){this.circle.setRadius(e)}};let OccEllipse=class OccEllipse extends OccConic{ellipse;constructor(e){super(e),this.ellipse=e}get center(){return(0,n.gc)(e=>OcctHelper.toXYZ(e(this.ellipse.location())))}set center(e){(0,n.gc)(r=>{this.ellipse.setLocation(r(OcctHelper.toPnt(e)))})}get focus1(){return(0,n.gc)(e=>OcctHelper.toXYZ(e(this.ellipse.focus1())))}get focus2(){return(0,n.gc)(e=>OcctHelper.toXYZ(e(this.ellipse.focus2())))}get majorRadius(){return this.ellipse.majorRadius()}set majorRadius(e){this.ellipse.setMajorRadius(e)}get minorRadius(){return this.ellipse.minorRadius()}set minorRadius(e){this.ellipse.setMinorRadius(e)}};let OccHyperbola=class OccHyperbola extends OccConic{hyperbola;constructor(e){super(e),this.hyperbola=e}focal(){return this.hyperbola.focal()}get location(){return(0,n.gc)(e=>OcctHelper.toXYZ(e(this.hyperbola.location())))}set location(e){(0,n.gc)(r=>{this.hyperbola.setLocation(r(OcctHelper.toPnt(e)))})}get focus1(){return(0,n.gc)(e=>OcctHelper.toXYZ(e(this.hyperbola.focus1())))}get focus2(){return(0,n.gc)(e=>OcctHelper.toXYZ(e(this.hyperbola.focus2())))}get majorRadius(){return this.hyperbola.majorRadius()}set majorRadius(e){this.hyperbola.setMajorRadius(e)}get minorRadius(){return this.hyperbola.minorRadius()}set minorRadius(e){this.hyperbola.setMinorRadius(e)}};let OccParabola=class OccParabola extends OccConic{parabola;constructor(e){super(e),this.parabola=e}focal(){return this.parabola.focal()}get focus(){return(0,n.gc)(e=>OcctHelper.toXYZ(e(this.parabola.focus())))}get directrix(){return(0,n.gc)(e=>OcctHelper.toXYZ(e(e(this.parabola.directrix().location()))))}};let OccBoundedCurve=class OccBoundedCurve extends OccCurve{boundedCurve;constructor(e){super(e),this.boundedCurve=e}startPoint(){return(0,n.gc)(e=>OcctHelper.toXYZ(e(this.boundedCurve.startPoint())))}endPoint(){return(0,n.gc)(e=>OcctHelper.toXYZ(e(this.boundedCurve.endPoint())))}};let OccTrimmedCurve=class OccTrimmedCurve extends OccBoundedCurve{trimmedCurve;constructor(e){super(e),this.trimmedCurve=e}setTrim(e,r){this.trimmedCurve.setTrim(e,r,!0,!0)}_basisCurve;get basisCurve(){return this._basisCurve??=(0,n.gc)(e=>{let r=e(this.trimmedCurve.basisCurve());return OcctHelper.wrapCurve(r.get())}),this._basisCurve}disposeInternal(){super.disposeInternal(),this._basisCurve&&this._basisCurve.dispose()}};let OccOffsetCurve=class OccOffsetCurve extends OccCurve{offsetCurve;constructor(e){super(e),this.offsetCurve=e}_basisCurve;get basisCurve(){return this._basisCurve??=(0,n.gc)(e=>{let r=e(this.offsetCurve.basisCurve());return OcctHelper.wrapCurve(r.get())}),this._basisCurve}offset(){return this.offsetCurve.offset()}direction(){return(0,n.gc)(e=>OcctHelper.toXYZ(e(this.offsetCurve.direction())))}disposeInternal(){super.disposeInternal(),this._basisCurve&&this._basisCurve.dispose()}};let OccBezierCurve=class OccBezierCurve extends OccBoundedCurve{bezier;constructor(e){super(e),this.bezier=e}weight(e){return this.bezier.weight(e)}insertPoleAfter(e,r,t){(0,n.gc)(n=>{void 0===t?this.bezier.insertPoleAfter(e,n(OcctHelper.toPnt(r))):this.bezier.insertPoleAfterWithWeight(e,n(OcctHelper.toPnt(r)),t)})}insertPoleBefore(e,r,t){(0,n.gc)(n=>{void 0===t?this.bezier.insertPoleBefore(e,n(OcctHelper.toPnt(r))):this.bezier.insertPoleBeforeWithWeight(e,n(OcctHelper.toPnt(r)),t)})}removePole(e){this.bezier.removePole(e)}setPole(e,r,t){(0,n.gc)(n=>{void 0===t?this.bezier.setPole(e,n(OcctHelper.toPnt(r))):this.bezier.setPoleWithWeight(e,n(OcctHelper.toPnt(r)),t)})}setWeight(e,r){this.setWeight(e,r)}nbPoles(){return this.bezier.nbPoles()}pole(e){return(0,n.gc)(r=>OcctHelper.toXYZ(r(this.bezier.pole(e))))}degree(){return this.bezier.degree()}poles(){return(0,n.gc)(e=>{let r=[],t=e(this.bezier.getPoles());for(let n=1;n<=t.length();n++)r.push(OcctHelper.toXYZ(e(t.value(n))));return r})}};let OccBSplineCurve=class OccBSplineCurve extends OccBoundedCurve{bspline;constructor(e){super(e),this.bspline=e}nbKnots(){return this.bspline.nbKnots()}knot(e){return this.bspline.knot(e)}setKnot(e,r){this.bspline.setKnot(e,r)}nbPoles(){return this.bspline.nbPoles()}pole(e){return(0,n.gc)(r=>OcctHelper.toXYZ(r(this.bspline.pole(e))))}poles(){return(0,n.gc)(e=>{let r=[],t=e(this.bspline.getPoles());for(let n=1;n<=t.length();n++)r.push(OcctHelper.toXYZ(e(t.value(n))));return r})}weight(e){return this.bspline.weight(e)}setWeight(e,r){this.bspline.setWeight(e,r)}degree(){return this.bspline.degree()}};let OccSurface=class OccSurface extends OccGeometry{surface;constructor(e){super(e),this.surface=e}copy(){return(0,n.gc)(e=>{let r=e(this.surface.copy());return OcctHelper.wrapSurface(r.get())})}transformed(e){return(0,n.gc)(r=>{let t=r(this.surface.transformed(OcctHelper.convertFromMatrix(e)));return OcctHelper.wrapSurface(t.get())})}projectCurve(e){return(0,n.gc)(r=>{if(!(e instanceof OccCurve))return;let t=r(wasm.Surface.projectCurve(this.surface,e.curve));return OcctHelper.wrapCurve(t.get())})}project(e){return wasm.Surface.projectPoint(this.surface,e).map(e=>new n.vY(e.x,e.y,e.z)).toSorted((r,t)=>r.distanceTo(e)-t.distanceTo(e))}isPlanar(){return wasm.Surface.isPlanar(this.surface)}parameter(e,r){return wasm.Surface.parameters(this.surface,e,r)}nearestPoint(e){let r=wasm.Surface.nearestPoint(this.surface,e);if(r)return[OcctHelper.toXYZ(r.point),r.parameter]}continuity(){return OcctHelper.convertContinuity(this.surface.continuity())}uIso(e){return(0,n.gc)(r=>{let t=r(this.surface.uIso(e));return OcctHelper.wrapCurve(t.get())})}vIso(e){return(0,n.gc)(r=>{let t=r(this.surface.vIso(e));return OcctHelper.wrapCurve(t.get())})}isUClosed(){return this.surface.isUClosed()}isVClosed(){return this.surface.isVClosed()}isUPreiodic(){return this.surface.isUPeriodic()}isVPreiodic(){return this.surface.isVPeriodic()}vPeriod(){return this.surface.vPeriod()}uPeriod(){return this.surface.uPeriod()}bounds(){return wasm.Surface.bounds(this.surface)}isCNu(e){return this.surface.isCNu(e)}isCNv(e){return this.surface.isCNv(e)}d0(e,r){return(0,n.gc)(t=>{let n=t(new wasm.gp_Pnt(0,0,0));return this.surface.d0(e,r,n),OcctHelper.toXYZ(n)})}d1(e,r){return(0,n.gc)(t=>{let n=t(new wasm.gp_Pnt(0,0,0)),a=t(new wasm.gp_Vec(0,0,0)),o=t(new wasm.gp_Vec(0,0,0));return this.surface.d1(e,r,n,a,o),{point:OcctHelper.toXYZ(n),d1u:OcctHelper.toXYZ(a),d1v:OcctHelper.toXYZ(o)}})}d2(e,r){return(0,n.gc)(t=>{let n=t(new wasm.gp_Pnt(0,0,0)),a=t(new wasm.gp_Vec(0,0,0)),o=t(new wasm.gp_Vec(0,0,0)),s=t(new wasm.gp_Vec(0,0,0)),i=t(new wasm.gp_Vec(0,0,0)),c=t(new wasm.gp_Vec(0,0,0));return this.surface.d2(e,r,n,a,o,s,i,c),{point:OcctHelper.toXYZ(n),d1u:OcctHelper.toXYZ(a),d1v:OcctHelper.toXYZ(o),d2u:OcctHelper.toXYZ(s),d2v:OcctHelper.toXYZ(i),d2uv:OcctHelper.toXYZ(c)}})}d3(e,r){return(0,n.gc)(t=>{let n=t(new wasm.gp_Pnt(0,0,0)),a=t(new wasm.gp_Vec(0,0,0)),o=t(new wasm.gp_Vec(0,0,0)),s=t(new wasm.gp_Vec(0,0,0)),i=t(new wasm.gp_Vec(0,0,0)),c=t(new wasm.gp_Vec(0,0,0)),u=t(new wasm.gp_Vec(0,0,0)),l=t(new wasm.gp_Vec(0,0,0)),p=t(new wasm.gp_Vec(0,0,0)),d=t(new wasm.gp_Vec(0,0,0));return this.surface.d3(e,r,n,a,o,s,i,c,u,l,p,d),{point:OcctHelper.toXYZ(n),d1u:OcctHelper.toXYZ(a),d1v:OcctHelper.toXYZ(o),d2u:OcctHelper.toXYZ(s),d2v:OcctHelper.toXYZ(i),d2uv:OcctHelper.toXYZ(c),d3u:OcctHelper.toXYZ(u),d3v:OcctHelper.toXYZ(l),d3uuv:OcctHelper.toXYZ(p),d3uvv:OcctHelper.toXYZ(d)}})}dn(e,r,t,a){return(0,n.gc)(n=>{let o=n(this.surface.dn(e,r,t,a));return OcctHelper.toXYZ(o)})}value(e,r){return(0,n.gc)(t=>{let n=t(this.surface.value(e,r));return OcctHelper.toXYZ(n)})}};let OccPlateSurface=class OccPlateSurface extends OccSurface{plateSurface;constructor(e){super(e),this.plateSurface=e}setBounds(e,r,t,n){this.plateSurface.setBounds(e,r,t,n)}};let OccElementarySurface=class OccElementarySurface extends OccSurface{elementarySurface;constructor(e){super(e),this.elementarySurface=e}get location(){return(0,n.gc)(e=>OcctHelper.toXYZ(e(this.elementarySurface.location())))}set location(e){(0,n.gc)(r=>{this.elementarySurface.setLocation(r(OcctHelper.toPnt(e)))})}get axis(){return(0,n.gc)(e=>OcctHelper.toXYZ(e(e(this.elementarySurface.axis()).direction())))}set axis(e){(0,n.gc)(r=>{let t=r(this.elementarySurface.location()),n=r(new wasm.gp_Ax1(t,r(OcctHelper.toDir(e))));this.elementarySurface.setAxis(n)})}get coordinates(){return(0,n.gc)(e=>OcctHelper.fromAx23(e(this.elementarySurface.position())))}set coordinates(e){(0,n.gc)(r=>{this.elementarySurface.setPosition(r(OcctHelper.toAx3(e)))})}};let OccOffsetSurface=class OccOffsetSurface extends OccSurface{offsetSurface;constructor(e){super(e),this.offsetSurface=e}get offset(){return this.offsetSurface.offset()}set offset(e){this.offsetSurface.setOffsetValue(e)}get basisSurface(){return(0,n.gc)(e=>{let r=e(this.offsetSurface.basisSurface());return OcctHelper.wrapSurface(r.get())})}set basisSurface(e){(0,n.gc)(r=>{if(e instanceof OccSurface){let t=r(new wasm.Handle_Geom_Surface(e.surface));this.offsetSurface.setBasisSurface(t,!0)}throw Error("Invalid surface type")})}};let OccSweptSurface=class OccSweptSurface extends OccSurface{sweptSurface;constructor(e){super(e),this.sweptSurface=e}direction(){return(0,n.gc)(e=>OcctHelper.toXYZ(e(this.sweptSurface.direction())))}basisCurve(){return(0,n.gc)(e=>{let r=this.sweptSurface.basisCurve();return OcctHelper.wrapCurve(r.get())})}};let OccCompositeSurface=class OccCompositeSurface extends OccSurface{constructor(e){super(e)}};let OccBSplineSurface=class OccBSplineSurface extends OccSurface{bsplineSurface;constructor(e){super(e),this.bsplineSurface=e}};let OccBezierSurface=class OccBezierSurface extends OccSurface{bezierSurface;constructor(e){super(e),this.bezierSurface=e}};let OccRectangularSurface=class OccRectangularSurface extends OccSurface{rectangularSurface;constructor(e){super(e),this.rectangularSurface=e}basisSurface(){return(0,n.gc)(e=>{let r=e(this.rectangularSurface.basisSurface());return OcctHelper.wrapSurface(r.get())})}setUTrim(e,r){this.rectangularSurface.setTrim2(e,r,!0,!0)}setVTrim(e,r){this.rectangularSurface.setTrim2(e,r,!1,!0)}setTrim(e,r,t,n){this.rectangularSurface.setTrim(e,r,t,n,!0,!0)}};let OccConicalSurface=class OccConicalSurface extends OccElementarySurface{conicalSurface;constructor(e){super(e),this.conicalSurface=e}get semiAngle(){return this.conicalSurface.semiAngle()}set semiAngle(e){this.conicalSurface.setSemiAngle(e)}setRadius(e){return this.conicalSurface.setRadius(e)}apex(){return(0,n.gc)(e=>OcctHelper.toXYZ(e(this.conicalSurface.apex())))}refRadius(){return this.conicalSurface.refRadius()}};let OccCylindricalSurface=class OccCylindricalSurface extends OccElementarySurface{cylindricalSurface;constructor(e){super(e),this.cylindricalSurface=e}get radius(){return this.cylindricalSurface.radius()}set radius(e){this.cylindricalSurface.setRadius(e)}};let OccPlane=class OccPlane extends OccElementarySurface{geom_plane;constructor(e){super(e),this.geom_plane=e}get plane(){return(0,n.gc)(e=>OcctHelper.fromPln(e(this.geom_plane.pln())))}set plane(e){(0,n.gc)(r=>{this.geom_plane.setPln(r(OcctHelper.toPln(e)))})}};let OccSphericalSurface=class OccSphericalSurface extends OccElementarySurface{sphericalSurface;constructor(e){super(e),this.sphericalSurface=e}get radius(){return this.sphericalSurface.radius()}set radius(e){this.sphericalSurface.setRadius(e)}area(){return this.sphericalSurface.area()}volume(){return this.sphericalSurface.volume()}};let OccToroidalSurface=class OccToroidalSurface extends OccElementarySurface{toroidalSurface;constructor(e){super(e),this.toroidalSurface=e}area(){return this.toroidalSurface.area()}volume(){return this.toroidalSurface.volume()}get majorRadius(){return this.toroidalSurface.majorRadius()}set majorRadius(e){this.toroidalSurface.setMajorRadius(e)}get minorRadius(){return this.toroidalSurface.minorRadius()}set minorRadius(e){this.toroidalSurface.setMinorRadius(e)}};let OccSurfaceOfLinearExtrusion=class OccSurfaceOfLinearExtrusion extends OccSweptSurface{surfaceOfLinearExtrusion;constructor(e){super(e),this.surfaceOfLinearExtrusion=e}setDirection(e){(0,n.gc)(r=>{this.surfaceOfLinearExtrusion.setDirection(r(OcctHelper.toDir(e)))})}setBasisCurve(e){if(!(e instanceof OccCurve))throw Error("curve must be an OccCurve");let r=new wasm.Handle_Geom_Curve(e.curve);this.surfaceOfLinearExtrusion.setBasisCurve(r),r.delete()}};let OccSurfaceOfRevolution=class OccSurfaceOfRevolution extends OccSweptSurface{surfaceOfRevolution;constructor(e){super(e),this.surfaceOfRevolution=e}get location(){return(0,n.gc)(e=>OcctHelper.toXYZ(e(this.surfaceOfRevolution.location())))}set location(e){(0,n.gc)(r=>{this.surfaceOfRevolution.setLocation(r(OcctHelper.toPnt(e)))})}referencePlane(){return(0,n.gc)(e=>OcctHelper.fromAx23(e(this.surfaceOfRevolution.referencePlane())))}setDirection(e){(0,n.gc)(r=>{this.surfaceOfRevolution.setDirection(r(OcctHelper.toDir(e)))})}setBasisCurve(e){if(!(e instanceof OccCurve))throw Error("curve must be an OccCurve");let r=new wasm.Handle_Geom_Curve(e.curve);this.surfaceOfRevolution.setBasisCurve(r),r.delete()}};let OcctHelper=class OcctHelper{static toXYZ(e){return new n.vY(e.x,e.y,e.z)}static toDir(e){return new wasm.gp_Dir(e.x,e.y,e.z)}static toPnt(e){return new wasm.gp_Pnt(e.x,e.y,e.z)}static toVec(e){return new wasm.gp_Vec(e.x,e.y,e.z)}static toAx1(e){return(0,n.gc)(r=>new wasm.gp_Ax1(r(OcctHelper.toPnt(e.location)),r(OcctHelper.toDir(e.direction))))}static toAx2(e){return(0,n.gc)(r=>new wasm.gp_Ax2(r(OcctHelper.toPnt(e.origin)),r(OcctHelper.toDir(e.normal)),r(OcctHelper.toDir(e.xvec))))}static toAx3(e){return new wasm.gp_Ax3(OcctHelper.toPnt(e.origin),OcctHelper.toDir(e.normal),OcctHelper.toDir(e.xvec))}static fromAx23(e){return(0,n.gc)(r=>new n.JO(OcctHelper.toXYZ(r(e.location())),OcctHelper.toXYZ(r(e.direction())),OcctHelper.toXYZ(r(e.xDirection()))))}static fromPln(e){return(0,n.gc)(r=>{let t=r(e.position());return this.fromAx23(t)})}static toPln(e){return(0,n.gc)(r=>new wasm.gp_Pln(r(OcctHelper.toAx3(e))))}static convertFromMatrix(e){let r=e.toArray(),t=new wasm.gp_Trsf;return t.setValues(r[0],r[4],r[8],r[12],r[1],r[5],r[9],r[13],r[2],r[6],r[10],r[14]),t}static convertToMatrix(e){let r=[e.value(1,1),e.value(2,1),e.value(3,1),0,e.value(1,2),e.value(2,2),e.value(3,2),0,e.value(1,3),e.value(2,3),e.value(3,3),0,e.value(1,4),e.value(2,4),e.value(3,4),1];return n.yG.fromArray(r)}static getOrientation(e){switch(e.getOrientation()){case wasm.TopAbs_Orientation.TopAbs_FORWARD:return n.i5.FORWARD;case wasm.TopAbs_Orientation.TopAbs_REVERSED:return n.i5.REVERSED;case wasm.TopAbs_Orientation.TopAbs_INTERNAL:return n.i5.INTERNAL;case wasm.TopAbs_Orientation.TopAbs_EXTERNAL:return n.i5.EXTERNAL;default:return n.i5.FORWARD}}static getShapeType(e){if(e.isNull())throw Error("Shape is null");switch(e.shapeType()){case wasm.TopAbs_ShapeEnum.TopAbs_COMPOUND:return n.ax.Compound;case wasm.TopAbs_ShapeEnum.TopAbs_COMPSOLID:return n.ax.CompoundSolid;case wasm.TopAbs_ShapeEnum.TopAbs_SOLID:return n.ax.Solid;case wasm.TopAbs_ShapeEnum.TopAbs_SHELL:return n.ax.Shell;case wasm.TopAbs_ShapeEnum.TopAbs_FACE:return n.ax.Face;case wasm.TopAbs_ShapeEnum.TopAbs_WIRE:return n.ax.Wire;case wasm.TopAbs_ShapeEnum.TopAbs_EDGE:return n.ax.Edge;case wasm.TopAbs_ShapeEnum.TopAbs_VERTEX:return n.ax.Vertex;default:return n.ax.Shape}}static getShapeEnum(e){switch(e){case n.ax.Compound:return wasm.TopAbs_ShapeEnum.TopAbs_COMPOUND;case n.ax.CompoundSolid:return wasm.TopAbs_ShapeEnum.TopAbs_COMPSOLID;case n.ax.Solid:return wasm.TopAbs_ShapeEnum.TopAbs_SOLID;case n.ax.Shell:return wasm.TopAbs_ShapeEnum.TopAbs_SHELL;case n.ax.Face:return wasm.TopAbs_ShapeEnum.TopAbs_FACE;case n.ax.Wire:return wasm.TopAbs_ShapeEnum.TopAbs_WIRE;case n.ax.Edge:return wasm.TopAbs_ShapeEnum.TopAbs_EDGE;case n.ax.Vertex:return wasm.TopAbs_ShapeEnum.TopAbs_VERTEX;case n.ax.Shape:return wasm.TopAbs_ShapeEnum.TopAbs_SHAPE;default:throw Error("Unknown shape type: "+e)}}static getActualShape(e){if(e.isNull())throw Error("Shape is null");switch(e.shapeType()){case wasm.TopAbs_ShapeEnum.TopAbs_COMPOUND:return wasm.TopoDS.compound(e);case wasm.TopAbs_ShapeEnum.TopAbs_COMPSOLID:return wasm.TopoDS.compsolid(e);case wasm.TopAbs_ShapeEnum.TopAbs_SOLID:return wasm.TopoDS.solid(e);case wasm.TopAbs_ShapeEnum.TopAbs_SHELL:return wasm.TopoDS.shell(e);case wasm.TopAbs_ShapeEnum.TopAbs_FACE:return wasm.TopoDS.face(e);case wasm.TopAbs_ShapeEnum.TopAbs_WIRE:return wasm.TopoDS.wire(e);case wasm.TopAbs_ShapeEnum.TopAbs_EDGE:return wasm.TopoDS.edge(e);case wasm.TopAbs_ShapeEnum.TopAbs_VERTEX:return wasm.TopoDS.vertex(e);default:return e}}static getJoinType(e){switch(e){case n.AH.arc:return wasm.GeomAbs_JoinType.GeomAbs_Arc;case n.AH.intersection:return wasm.GeomAbs_JoinType.GeomAbs_Intersection;case n.AH.tangent:return wasm.GeomAbs_JoinType.GeomAbs_Tangent;default:throw Error("Unknown join type: "+e)}}static wrapShape(e,r=n.Id.generate()){if(e.isNull())throw Error("Shape is null");switch(e.shapeType()){case wasm.TopAbs_ShapeEnum.TopAbs_COMPOUND:return new OccCompound(wasm.TopoDS.compound(e),r);case wasm.TopAbs_ShapeEnum.TopAbs_COMPSOLID:return new OccCompSolid(wasm.TopoDS.compsolid(e),r);case wasm.TopAbs_ShapeEnum.TopAbs_SOLID:return new OccSolid(wasm.TopoDS.solid(e),r);case wasm.TopAbs_ShapeEnum.TopAbs_SHELL:return new OccShell(wasm.TopoDS.shell(e),r);case wasm.TopAbs_ShapeEnum.TopAbs_FACE:return new OccFace(wasm.TopoDS.face(e),r);case wasm.TopAbs_ShapeEnum.TopAbs_WIRE:return new OccWire(wasm.TopoDS.wire(e),r);case wasm.TopAbs_ShapeEnum.TopAbs_EDGE:return new OccEdge(wasm.TopoDS.edge(e),r);case wasm.TopAbs_ShapeEnum.TopAbs_VERTEX:return new OccVertex(wasm.TopoDS.vertex(e),r);default:return new OccShape(e,r)}}static wrapCurve(e){let isType=r=>wasm.Transient.isInstance(e,r);if(isType("Geom_Line"))return new OccLine(e);if(isType("Geom_Circle"))return new OccCircle(e);if(isType("Geom_Ellipse"))return new OccEllipse(e);if(isType("Geom_Hyperbola"))return new OccHyperbola(e);if(isType("Geom_Parabola"))return new OccParabola(e);else if(isType("Geom_BezierCurve"))return new OccBezierCurve(e);else if(isType("Geom_BSplineCurve"))return new OccBSplineCurve(e);else if(isType("Geom_OffsetCurve"))return new OccOffsetCurve(e);else if(isType("Geom_TrimmedCurve"))return new OccTrimmedCurve(e);throw Error("Unknown curve type: "+String(e))}static getCurveType(e){let isType=r=>wasm.Transient.isInstance(e,r);if(isType("Geom_Line"))return n.v7.Line;if(isType("Geom_Circle"))return n.v7.Circle;if(isType("Geom_Ellipse"))return n.v7.Ellipse;if(isType("Geom_Hyperbola"))return n.v7.Hyperbola;if(isType("Geom_Parabola"))return n.v7.Parabola;else if(isType("Geom_BezierCurve"))return n.v7.BezierCurve;else if(isType("Geom_BSplineCurve"))return n.v7.BSplineCurve;else if(isType("Geom_OffsetCurve"))return n.v7.OffsetCurve;else if(isType("Geom_TrimmedCurve"))return n.v7.TrimmedCurve;throw Error("Unknown curve type")}static wrapSurface(e){let isType=r=>wasm.Transient.isInstance(e,r);if(isType("GeomPlate_Surface"))return new OccPlateSurface(e);if(isType("Geom_Plane"))return new OccPlane(e);if(isType("Geom_SurfaceOfLinearExtrusion"))return new OccSurfaceOfLinearExtrusion(e);if(isType("Geom_SurfaceOfRevolution"))return new OccSurfaceOfRevolution(e);if(isType("Geom_OffsetSurface"))return new OccOffsetSurface(e);else if(isType("Geom_BSplineSurface"))return new OccBSplineSurface(e);else if(isType("Geom_BezierSurface"))return new OccBezierSurface(e);else if(isType("Geom_CylindricalSurface"))return new OccCylindricalSurface(e);else if(isType("Geom_ConicalSurface"))return new OccConicalSurface(e);else if(isType("Geom_SphericalSurface"))return new OccSphericalSurface(e);else if(isType("Geom_RectangularTrimmedSurface"))return new OccRectangularSurface(e);else if(isType("Geom_ToroidalSurface"))return new OccToroidalSurface(e);else if(isType("ShapeExtent_CompositeSurface"))return new OccCompositeSurface(e);throw Error("Unknown surface type: "+String(e))}static getSurfaceType(e){let isType=r=>wasm.Transient.isInstance(e,r);if(isType("GeomPlate_Surface"))return n.cx.Plate;if(isType("Geom_Plane"))return n.cx.Plane;if(isType("Geom_SurfaceOfLinearExtrusion"))return n.cx.Extrusion;if(isType("Geom_SurfaceOfRevolution"))return n.cx.Revolution;if(isType("Geom_OffsetSurface"))return n.cx.Offset;else if(isType("Geom_BSplineSurface"))return n.cx.BSpline;else if(isType("Geom_BezierSurface"))return n.cx.Bezier;else if(isType("Geom_CylindricalSurface"))return n.cx.Cylinder;else if(isType("Geom_ConicalSurface"))return n.cx.Conical;else if(isType("Geom_SphericalSurface"))return n.cx.Spherical;else if(isType("Geom_RectangularTrimmedSurface"))return n.cx.RectangularTrimmed;else if(isType("Geom_ToroidalSurface"))return n.cx.Toroidal;else if(isType("ShapeExtent_CompositeSurface"))return n.cx.Composite;throw Error("Unknown surface type")}static convertContinuity(e){switch(e){case wasm.GeomAbs_Shape.GeomAbs_C0:return n.PY.C0;case wasm.GeomAbs_Shape.GeomAbs_G1:return n.PY.G1;case wasm.GeomAbs_Shape.GeomAbs_C1:return n.PY.C1;case wasm.GeomAbs_Shape.GeomAbs_G2:return n.PY.G2;case wasm.GeomAbs_Shape.GeomAbs_C2:return n.PY.C2;case wasm.GeomAbs_Shape.GeomAbs_C3:return n.PY.C3;case wasm.GeomAbs_Shape.GeomAbs_CN:return n.PY.CN;default:throw Error("unknown continuity")}}};let OccShapeConverter=class OccShapeConverter{addShapeNode=(e,r,t,a,o)=>{if(t.shape&&!t.shape.isNull()){let e=OcctHelper.wrapShape(t.shape),a=o(r.document,t.color);r.add(new n.gC(r.document,t.name,e,a))}a.forEach(t=>{e(t);let a=t.getChildren(),s=a.length>1?new n.Gw(r.document,t.name):r;a.length>1&&r.add(s),this.addShapeNode(e,s,t,a,o)})};convertToIGES(...e){let r=e.map(e=>{if(e instanceof OccShape)return e.shape;throw Error("Shape is not an OccShape")});return n.x4.ok(wasm.Converter.convertToIges(r))}convertFromIGES(e,r){return this.converterFromData(e,r,wasm.Converter.convertFromIges)}converterFromData=(e,r,t)=>{let a=new Map,getMaterialId=(e,r)=>{if(!a.has(r)){let t=new n.F5(e,r,r);e.materials.push(t),a.set(r,t.id)}return a.get(r)};return(0,n.gc)(a=>{let o=t(r);if(!o)return n.x4.err("can not convert");let s=new n.Gw(e,"undefined");return this.addShapeNode(a,s,o,o.getChildren(),getMaterialId),a(o),n.x4.ok(s)})};convertToSTEP(...e){let r=e.map(e=>{if(e instanceof OccShape)return e.shape;throw Error("Shape is not an OccShape")});return n.x4.ok(wasm.Converter.convertToStep(r))}convertFromSTEP(e,r){return this.converterFromData(e,r,wasm.Converter.convertFromStep)}convertToBrep(e){return e instanceof OccShape?n.x4.ok(wasm.Converter.convertToBrep(e.shape)):n.x4.err("Shape is not an OccShape")}convertFromBrep(e){let r=wasm.Converter.convertFromBrep(e);return r.isNull()?n.x4.err("can not convert"):n.x4.ok(OcctHelper.wrapShape(r))}};function ensureOccShape(e){if(Array.isArray(e))return e.map(e=>{if(!(e instanceof OccShape))throw Error("The OCC kernel only supports OCC geometries.");return e.shape});if(e instanceof OccShape)return[e.shape];throw Error("The OCC kernel only supports OCC geometries.")}function convertShapeResult(e){let r;return r=e.isOk?e.shape.isNull()?n.x4.err("The shape is null."):n.x4.ok(OcctHelper.wrapShape(e.shape)):n.x4.err(e.error),e.delete(),r}let ShapeFactory=class ShapeFactory{kernelName="opencascade";converter;constructor(){this.converter=new OccShapeConverter}fillet(e,r,t){return t<n.Gc.Distance?n.x4.err("The radius is too small."):0===r.length?n.x4.err("The edges is empty."):e instanceof OccShape?convertShapeResult(wasm.ShapeFactory.fillet(e.shape,r,t)):n.x4.err("Not OccShape")}chamfer(e,r,t){return t<n.Gc.Distance?n.x4.err("The distance is too small."):0===r.length?n.x4.err("The edges is empty."):e instanceof OccShape?convertShapeResult(wasm.ShapeFactory.chamfer(e.shape,r,t)):n.x4.err("Not OccShape")}removeFeature(e,r){if(!(e instanceof OccShape))return n.x4.err("Not OccShape");let t=r.map(e=>{if(!(e instanceof OccShape))throw Error("The OCC kernel only supports OCC geometries.");if(e.shape.isNull())throw Error("The shape is null.");return e.shape}),a=wasm.Shape.removeFeature(e.shape,t);return a.isNull()?n.x4.err("Can not remove"):n.x4.ok(OcctHelper.wrapShape(a))}removeSubShape(e,r){let t=ensureOccShape(e),n=ensureOccShape(r);return OcctHelper.wrapShape(wasm.Shape.removeSubShape(t[0],n))}replaceSubShape(e,r,t){let[n,a,o]=ensureOccShape([e,r,t]);return OcctHelper.wrapShape(wasm.Shape.replaceSubShape(n,a,o))}face(e){let r=ensureOccShape(e);return convertShapeResult(wasm.ShapeFactory.face(r))}bezier(e,r){return convertShapeResult(wasm.ShapeFactory.bezier(e,r??[]))}point(e){return convertShapeResult(wasm.ShapeFactory.point(e))}line(e,r){return n.M8.allEqualZero(e.x-r.x,e.y-r.y,e.z-r.z)?n.x4.err("The start and end points are too close."):convertShapeResult(wasm.ShapeFactory.line(e,r))}arc(e,r,t,a){return convertShapeResult(wasm.ShapeFactory.arc(e,r,t,n.M8.degToRad(a)))}circle(e,r,t){return convertShapeResult(wasm.ShapeFactory.circle(e,r,t))}rect(e,r,t){return convertShapeResult(wasm.ShapeFactory.rect({location:e.origin,direction:e.normal,xDirection:e.xvec},r,t))}polygon(e){return convertShapeResult(wasm.ShapeFactory.polygon(e))}box(e,r,t,n){return convertShapeResult(wasm.ShapeFactory.box({location:e.origin,direction:e.normal,xDirection:e.xvec},r,t,n))}cylinder(e,r,t,n){return convertShapeResult(wasm.ShapeFactory.cylinder(e,r,t,n))}cone(e,r,t,n,a){return convertShapeResult(wasm.ShapeFactory.cone(e,r,t,n,a))}sphere(e,r){return convertShapeResult(wasm.ShapeFactory.sphere(e,r))}ellipse(e,r,t,n,a){return convertShapeResult(wasm.ShapeFactory.ellipse(e,r,t,n,a))}pyramid(e,r,t,n){return convertShapeResult(wasm.ShapeFactory.pyramid({location:e.origin,direction:e.normal,xDirection:e.xvec},r,t,n))}wire(e){return convertShapeResult(wasm.ShapeFactory.wire(ensureOccShape(e)))}shell(e){return convertShapeResult(wasm.ShapeFactory.shell(ensureOccShape(e)))}solid(e){return convertShapeResult(wasm.ShapeFactory.solid(ensureOccShape(e)))}prism(e,r){return 0===r.length()?n.x4.err("The vector length is 0, the prism cannot be created."):convertShapeResult(wasm.ShapeFactory.prism(ensureOccShape(e)[0],r))}fuse(e,r){return convertShapeResult(wasm.ShapeFactory.booleanFuse(ensureOccShape(e),ensureOccShape(r)))}sweep(e,r){return convertShapeResult(wasm.ShapeFactory.sweep(ensureOccShape(e)[0],ensureOccShape(r)[0]))}revolve(e,r,t){return convertShapeResult(wasm.ShapeFactory.revolve(ensureOccShape(e)[0],{location:r.location,direction:r.direction},n.M8.degToRad(t)))}booleanCommon(e,r){return convertShapeResult(wasm.ShapeFactory.booleanCommon(ensureOccShape(e),ensureOccShape(r)))}booleanCut(e,r){return convertShapeResult(wasm.ShapeFactory.booleanCut(ensureOccShape(e),ensureOccShape(r)))}booleanFuse(e,r){return convertShapeResult(wasm.ShapeFactory.booleanFuse(ensureOccShape(e),ensureOccShape(r)))}combine(e){return convertShapeResult(wasm.ShapeFactory.combine(ensureOccShape(e)))}makeThickSolidBySimple(e,r){return convertShapeResult(wasm.ShapeFactory.makeThickSolidBySimple(ensureOccShape(e)[0],r))}makeThickSolidByJoin(e,r,t){return convertShapeResult(wasm.ShapeFactory.makeThickSolidByJoin(ensureOccShape(e)[0],ensureOccShape(r),t))}}}}]);
//# sourceMappingURL=33.js.map